<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>配置中心 | TosinJia</title>
    <meta name="generator" content="VuePress 1.9.7">
    <script language="javascript" type="text/javascript" src="/js/pgmanor-self.js"></script>
    <link rel="icon" href="/images/favicon.ico">
    <meta name="description" content="TosinJia">
    
    <link rel="preload" href="/assets/css/0.styles.d77f493a.css" as="style"><link rel="preload" href="/assets/js/app.de0ffd6c.js" as="script"><link rel="preload" href="/assets/js/3.059a2ce3.js" as="script"><link rel="preload" href="/assets/js/27.7a40c7b4.js" as="script"><link rel="prefetch" href="/assets/js/10.471d2f7d.js"><link rel="prefetch" href="/assets/js/11.64c9bea0.js"><link rel="prefetch" href="/assets/js/12.8cd035ea.js"><link rel="prefetch" href="/assets/js/13.ac133c7d.js"><link rel="prefetch" href="/assets/js/14.55b76568.js"><link rel="prefetch" href="/assets/js/15.94aa71a8.js"><link rel="prefetch" href="/assets/js/16.6d62875d.js"><link rel="prefetch" href="/assets/js/17.d3dbf31d.js"><link rel="prefetch" href="/assets/js/18.5f3a7f7e.js"><link rel="prefetch" href="/assets/js/19.adf383b8.js"><link rel="prefetch" href="/assets/js/2.9d302d7a.js"><link rel="prefetch" href="/assets/js/20.1074faf8.js"><link rel="prefetch" href="/assets/js/21.05a74ab0.js"><link rel="prefetch" href="/assets/js/22.7f76ccfc.js"><link rel="prefetch" href="/assets/js/23.9304b5d5.js"><link rel="prefetch" href="/assets/js/24.86d2ac06.js"><link rel="prefetch" href="/assets/js/25.a13eba67.js"><link rel="prefetch" href="/assets/js/26.9baa244d.js"><link rel="prefetch" href="/assets/js/28.9e30bc88.js"><link rel="prefetch" href="/assets/js/29.5a968fce.js"><link rel="prefetch" href="/assets/js/30.8faabbe6.js"><link rel="prefetch" href="/assets/js/31.60e0f28d.js"><link rel="prefetch" href="/assets/js/32.7bb1d9af.js"><link rel="prefetch" href="/assets/js/33.6f86b100.js"><link rel="prefetch" href="/assets/js/34.84067eaf.js"><link rel="prefetch" href="/assets/js/35.b2b8ac8d.js"><link rel="prefetch" href="/assets/js/36.7fc4dbe8.js"><link rel="prefetch" href="/assets/js/37.7849bc09.js"><link rel="prefetch" href="/assets/js/38.235de5e3.js"><link rel="prefetch" href="/assets/js/39.161f213e.js"><link rel="prefetch" href="/assets/js/4.335c6a02.js"><link rel="prefetch" href="/assets/js/40.f3b94ce2.js"><link rel="prefetch" href="/assets/js/41.fdc5ac1f.js"><link rel="prefetch" href="/assets/js/42.9d9ce856.js"><link rel="prefetch" href="/assets/js/43.883aa723.js"><link rel="prefetch" href="/assets/js/44.09215286.js"><link rel="prefetch" href="/assets/js/45.dae7f7c0.js"><link rel="prefetch" href="/assets/js/46.66c92fb8.js"><link rel="prefetch" href="/assets/js/47.575074f0.js"><link rel="prefetch" href="/assets/js/48.3e1ece3e.js"><link rel="prefetch" href="/assets/js/49.42212c07.js"><link rel="prefetch" href="/assets/js/5.2f47cbe8.js"><link rel="prefetch" href="/assets/js/50.47bec168.js"><link rel="prefetch" href="/assets/js/51.742ddc89.js"><link rel="prefetch" href="/assets/js/52.6876737a.js"><link rel="prefetch" href="/assets/js/53.5e1f3810.js"><link rel="prefetch" href="/assets/js/54.3dbad0f1.js"><link rel="prefetch" href="/assets/js/55.f233405f.js"><link rel="prefetch" href="/assets/js/56.d1566959.js"><link rel="prefetch" href="/assets/js/57.a58e03cf.js"><link rel="prefetch" href="/assets/js/6.e8a5dbcd.js"><link rel="prefetch" href="/assets/js/7.fe9d2c9f.js"><link rel="prefetch" href="/assets/js/8.0880906a.js"><link rel="prefetch" href="/assets/js/9.6e293cc6.js">
    <link rel="stylesheet" href="/assets/css/0.styles.d77f493a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">TosinJia</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="软件架构" class="dropdown-title"><span class="title">软件架构</span> <span class="arrow down"></span></button> <button type="button" aria-label="软件架构" class="mobile-dropdown-title"><span class="title">软件架构</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/softwareArchitecture/relatedTechnology.html" class="nav-link">
  相关技术
</a></li><li class="dropdown-item"><h4>
          开源框架
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/softwareArchitecture/openSourceFramework/introduction.html" class="nav-link">
  简介
</a></li><li class="dropdown-subitem"><a href="/softwareArchitecture/openSourceFramework/fontEnd/" class="nav-link">
  前端框架
</a></li><li class="dropdown-subitem"><a href="/softwareArchitecture/openSourceFramework/ruoyi/ruoyi-vue/" class="nav-link">
  RuoYi-Vue
</a></li><li class="dropdown-subitem"><a href="/softwareArchitecture/openSourceFramework/ruoyi/ruoyi-cloud/" class="nav-link">
  RuoYi-Cloud
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工作流" class="dropdown-title"><span class="title">工作流</span> <span class="arrow down"></span></button> <button type="button" aria-label="工作流" class="mobile-dropdown-title"><span class="title">工作流</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/softwareArchitecture/openSourceFramework/workflow/" class="nav-link">
  Activiti
</a></li><li class="dropdown-item"><!----> <a href="/softwareArchitecture/openSourceFramework/workflow/Activiti基础.html" class="nav-link">
  Activiti基础
</a></li><li class="dropdown-item"><!----> <a href="/softwareArchitecture/openSourceFramework/workflow/Activiti进阶.html" class="nav-link">
  Activiti进阶
</a></li><li class="dropdown-item"><!----> <a href="/softwareArchitecture/openSourceFramework/workflow/Activiti整合.html" class="nav-link">
  Activiti整合
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="教程" class="dropdown-title"><span class="title">教程</span> <span class="arrow down"></span></button> <button type="button" aria-label="教程" class="mobile-dropdown-title"><span class="title">教程</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tutorials/linuxTutorial.html" class="nav-link">
  Linux教程
</a></li><li class="dropdown-item"><!----> <a href="/tutorials/maven.html" class="nav-link">
  Maven教程
</a></li><li class="dropdown-item"><!----> <a href="/tutorials/gitTutorial.html" class="nav-link">
  Git教程
</a></li><li class="dropdown-item"><!----> <a href="/tutorials/vueTutorial.html" class="nav-link">
  Vue教程
</a></li><li class="dropdown-item"><!----> <a href="/tutorials/thymeleaf.html" class="nav-link">
  Thymeleaf教程
</a></li><li class="dropdown-item"><!----> <a href="/tutorials/docker.html" class="nav-link">
  Docker教程
</a></li><li class="dropdown-item"><!----> <a href="/tutorials/virtualMachine.html" class="nav-link">
  虚拟机
</a></li><li class="dropdown-item"><!----> <a href="/tutorials/JMeter.html" class="nav-link">
  JMeter
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><span class="title">数据库</span> <span class="arrow down"></span></button> <button type="button" aria-label="数据库" class="mobile-dropdown-title"><span class="title">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          设计
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/database/PowerDesigner.html" class="nav-link">
  PowerDesigner
</a></li><li class="dropdown-subitem"><a href="/database/oracle.html" class="nav-link">
  Oracle
</a></li><li class="dropdown-subitem"><a href="/database/mysql.html" class="nav-link">
  MySQL
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="搭建" class="dropdown-title"><span class="title">搭建</span> <span class="arrow down"></span></button> <button type="button" aria-label="搭建" class="mobile-dropdown-title"><span class="title">搭建</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/build/" class="nav-link">
  站点搭建
</a></li><li class="dropdown-item"><!----> <a href="/build/thirdPartyMd.html" class="nav-link">
  三方Markdown
</a></li></ul></div></div><div class="nav-item"><a href="https://www.bing.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  bing
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="软件架构" class="dropdown-title"><span class="title">软件架构</span> <span class="arrow down"></span></button> <button type="button" aria-label="软件架构" class="mobile-dropdown-title"><span class="title">软件架构</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/softwareArchitecture/relatedTechnology.html" class="nav-link">
  相关技术
</a></li><li class="dropdown-item"><h4>
          开源框架
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/softwareArchitecture/openSourceFramework/introduction.html" class="nav-link">
  简介
</a></li><li class="dropdown-subitem"><a href="/softwareArchitecture/openSourceFramework/fontEnd/" class="nav-link">
  前端框架
</a></li><li class="dropdown-subitem"><a href="/softwareArchitecture/openSourceFramework/ruoyi/ruoyi-vue/" class="nav-link">
  RuoYi-Vue
</a></li><li class="dropdown-subitem"><a href="/softwareArchitecture/openSourceFramework/ruoyi/ruoyi-cloud/" class="nav-link">
  RuoYi-Cloud
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工作流" class="dropdown-title"><span class="title">工作流</span> <span class="arrow down"></span></button> <button type="button" aria-label="工作流" class="mobile-dropdown-title"><span class="title">工作流</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/softwareArchitecture/openSourceFramework/workflow/" class="nav-link">
  Activiti
</a></li><li class="dropdown-item"><!----> <a href="/softwareArchitecture/openSourceFramework/workflow/Activiti基础.html" class="nav-link">
  Activiti基础
</a></li><li class="dropdown-item"><!----> <a href="/softwareArchitecture/openSourceFramework/workflow/Activiti进阶.html" class="nav-link">
  Activiti进阶
</a></li><li class="dropdown-item"><!----> <a href="/softwareArchitecture/openSourceFramework/workflow/Activiti整合.html" class="nav-link">
  Activiti整合
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="教程" class="dropdown-title"><span class="title">教程</span> <span class="arrow down"></span></button> <button type="button" aria-label="教程" class="mobile-dropdown-title"><span class="title">教程</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tutorials/linuxTutorial.html" class="nav-link">
  Linux教程
</a></li><li class="dropdown-item"><!----> <a href="/tutorials/maven.html" class="nav-link">
  Maven教程
</a></li><li class="dropdown-item"><!----> <a href="/tutorials/gitTutorial.html" class="nav-link">
  Git教程
</a></li><li class="dropdown-item"><!----> <a href="/tutorials/vueTutorial.html" class="nav-link">
  Vue教程
</a></li><li class="dropdown-item"><!----> <a href="/tutorials/thymeleaf.html" class="nav-link">
  Thymeleaf教程
</a></li><li class="dropdown-item"><!----> <a href="/tutorials/docker.html" class="nav-link">
  Docker教程
</a></li><li class="dropdown-item"><!----> <a href="/tutorials/virtualMachine.html" class="nav-link">
  虚拟机
</a></li><li class="dropdown-item"><!----> <a href="/tutorials/JMeter.html" class="nav-link">
  JMeter
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><span class="title">数据库</span> <span class="arrow down"></span></button> <button type="button" aria-label="数据库" class="mobile-dropdown-title"><span class="title">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          设计
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/database/PowerDesigner.html" class="nav-link">
  PowerDesigner
</a></li><li class="dropdown-subitem"><a href="/database/oracle.html" class="nav-link">
  Oracle
</a></li><li class="dropdown-subitem"><a href="/database/mysql.html" class="nav-link">
  MySQL
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="搭建" class="dropdown-title"><span class="title">搭建</span> <span class="arrow down"></span></button> <button type="button" aria-label="搭建" class="mobile-dropdown-title"><span class="title">搭建</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/build/" class="nav-link">
  站点搭建
</a></li><li class="dropdown-item"><!----> <a href="/build/thirdPartyMd.html" class="nav-link">
  三方Markdown
</a></li></ul></div></div><div class="nav-item"><a href="https://www.bing.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  bing
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>配置中心</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/softwareArchitecture/openSourceFramework/ruoyi/ruoyi-cloud-ow/cloud/config.html#基本介绍" class="sidebar-link">基本介绍</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/softwareArchitecture/openSourceFramework/ruoyi/ruoyi-cloud-ow/cloud/config.html#下载方式" class="sidebar-link">下载方式</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/softwareArchitecture/openSourceFramework/ruoyi/ruoyi-cloud-ow/cloud/config.html#如何使用" class="sidebar-link">如何使用</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/softwareArchitecture/openSourceFramework/ruoyi/ruoyi-cloud-ow/cloud/config.html#动态刷新" class="sidebar-link">动态刷新</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/softwareArchitecture/openSourceFramework/ruoyi/ruoyi-cloud-ow/cloud/config.html#mysql支持" class="sidebar-link">mysql支持</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/softwareArchitecture/openSourceFramework/ruoyi/ruoyi-cloud-ow/cloud/config.html#集群部署" class="sidebar-link">集群部署</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/softwareArchitecture/openSourceFramework/ruoyi/ruoyi-cloud-ow/cloud/config.html#控制台使用" class="sidebar-link">控制台使用</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/softwareArchitecture/openSourceFramework/ruoyi/ruoyi-cloud-ow/cloud/config.html#服务管理" class="sidebar-link">服务管理</a></li><li class="sidebar-sub-header"><a href="/softwareArchitecture/openSourceFramework/ruoyi/ruoyi-cloud-ow/cloud/config.html#配置管理" class="sidebar-link">配置管理</a></li><li class="sidebar-sub-header"><a href="/softwareArchitecture/openSourceFramework/ruoyi/ruoyi-cloud-ow/cloud/config.html#修改默认密码" class="sidebar-link">修改默认密码</a></li><li class="sidebar-sub-header"><a href="/softwareArchitecture/openSourceFramework/ruoyi/ruoyi-cloud-ow/cloud/config.html#会话时间" class="sidebar-link">会话时间</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="配置中心"><a href="#配置中心" class="header-anchor">#</a> 配置中心</h1> <h2 id="基本介绍"><a href="#基本介绍" class="header-anchor">#</a> 基本介绍</h2> <ul><li>什么是配置中心</li></ul> <p>在微服务架构中，当系统从一个单体应用，被拆分成分布式系统上一个个服务节点后，配置文件也必须跟着迁移（分割），这样配置就分散了，不仅如此，分散中还包含着冗余，如下图：</p> <p><img src="https://oscimg.oschina.net/oscnet/up-e61a40fefffca8dd0ab215273af767f2961.png" alt="config"></p> <p>总得来说，配置中心就是一种统一管理各种应用配置的基础服务组件。</p> <ul><li>为什么要使用配置中心</li></ul> <p>配置中心将配置从各应用中剥离出来，对配置进行统一管理，应用自身不需要自己去管理配置。</p> <ul><li>Nacos 配置中心</li></ul> <p><code>Nacos</code>是阿里巴巴开源的一个更易于构建云原生应用的动态服务发现、配置管理和服务管理平台。</p> <p><img src="https://oscimg.oschina.net/oscnet/up-36349d06b1ac13ea40abd2f1666b73218aa.png" alt="config"></p> <p>配置中心的服务流程如下：</p> <p>1、用户在配置中心更新配置信息。<br>
2、服务A和服务B及时得到配置更新通知，从配置中心获取配置。</p> <h2 id="下载方式"><a href="#下载方式" class="header-anchor">#</a> 下载方式</h2> <p><a href="/ruoyi-cloud/cloud/nacos.html#下载方式">参考下载方式</a></p> <h2 id="如何使用"><a href="#如何使用" class="header-anchor">#</a> 如何使用</h2> <p>1、添加依赖</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!-- springcloud alibaba nacos config --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-alibaba-nacos-config<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- SpringBoot Web --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>2、在<code>bootstrap.yml</code>添加Nacos配置</p> <div class="language-yml extra-class"><pre class="language-yml"><code><span class="token comment"># Spring</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span> 
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token comment"># 应用名称</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> ruoyi<span class="token punctuation">-</span>xxxx
  <span class="token key atrule">profiles</span><span class="token punctuation">:</span>
    <span class="token comment"># 环境配置</span>
    <span class="token key atrule">active</span><span class="token punctuation">:</span> dev
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">nacos</span><span class="token punctuation">:</span>
      <span class="token key atrule">config</span><span class="token punctuation">:</span>
        <span class="token comment"># 配置中心地址</span>
        <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> 127.0.0.1<span class="token punctuation">:</span><span class="token number">8848</span>
        <span class="token comment"># 配置文件格式</span>
        <span class="token key atrule">file-extension</span><span class="token punctuation">:</span> yml
        <span class="token comment"># 共享配置</span>
        <span class="token key atrule">shared-configs</span><span class="token punctuation">:</span>
          <span class="token punctuation">-</span> application<span class="token punctuation">-</span>$<span class="token punctuation">{</span>spring.profiles.active<span class="token punctuation">}</span>.$<span class="token punctuation">{</span>spring.cloud.nacos.config.file<span class="token punctuation">-</span>extension<span class="token punctuation">}</span>
</code></pre></div><p>配置文件加载的优先级（由高到低）<br> <code>bootstrap.properties -&gt;bootstrap.yml -&gt; application.properties -&gt; application.yml</code></p> <p>3、在<code>Application</code>启动类加入注解<code>@SpringBootApplication</code>。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RuoYiXxxxApplication</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">RuoYiXxxxApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;(♥◠‿◠)ﾉﾞ  Xxxx启动成功   ლ(´ڡ`ლ)ﾞ  \n&quot;</span> <span class="token operator">+</span>
                <span class="token string">&quot; .-------.       ____     __        \n&quot;</span> <span class="token operator">+</span>
                <span class="token string">&quot; |  _ _   \\      \\   \\   /  /    \n&quot;</span> <span class="token operator">+</span>
                <span class="token string">&quot; | ( ' )  |       \\  _. /  '       \n&quot;</span> <span class="token operator">+</span>
                <span class="token string">&quot; |(_ o _) /        _( )_ .'         \n&quot;</span> <span class="token operator">+</span>
                <span class="token string">&quot; | (_,_).' __  ___(_ o _)'          \n&quot;</span> <span class="token operator">+</span>
                <span class="token string">&quot; |  |\\ \\  |  ||   |(_,_)'         \n&quot;</span> <span class="token operator">+</span>
                <span class="token string">&quot; |  | \\ `'   /|   `-'  /           \n&quot;</span> <span class="token operator">+</span>
                <span class="token string">&quot; |  |  \\    /  \\      /           \n&quot;</span> <span class="token operator">+</span>
                <span class="token string">&quot; ''-'   `'-'    `-..-'              &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>4、给配置中心默认添加一个数据集 （Data Id）</p> <p><img src="https://oscimg.oschina.net/oscnet/up-43e02457f6a2b5ebc14c0fb33e4984e0612.png" alt="config"></p> <div class="language-yml extra-class"><pre class="language-yml"><code><span class="token comment"># 测试属性</span>
<span class="token key atrule">ruoyi</span><span class="token punctuation">:</span>
  <span class="token comment"># 名称</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> RuoYi
  <span class="token comment"># 版本</span>
  <span class="token key atrule">version</span><span class="token punctuation">:</span> 1.0.0
</code></pre></div><p>在Nacos Spring Cloud 中，数据集(Data Id) 的配置完整格式如下：<br> <code>${spring.cloud.nacos.config.prefix}-${spring.profiles.active}.${spring.cloud.nacos.config.file-extension}</code>通俗一点就是前缀-环境-扩展名</p> <p>5、编写测试类在<code>Controller</code>类中通过<code>@Value</code>注解获取配置值。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>ruoyi<span class="token punctuation">.</span>config</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Value</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">GetMapping</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RestController</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@RestController</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestController</span>
<span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;${ruoyi.name}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;${ruoyi.version}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> version<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;info&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> name <span class="token operator">+</span> version<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>访问<code>http://localhost:9999/info</code>，返回正确数据表示测试通过。</p> <h2 id="动态刷新"><a href="#动态刷新" class="header-anchor">#</a> 动态刷新</h2> <p>通常会在<code>Controller</code>里边用<code>@Value</code>取出使用，但是你要是想改变他，就要重新改代码，打包，部署，十分麻烦，我们需要让配置文件的值变得动起来，<code>Nacos</code>也采用了<code>Spring Cloud</code>原生注解<code>@RefreshScope</code>实现配置自动更新。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@RefreshScope</span> <span class="token comment">//动态刷新配置</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestController</span> 
<span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;${ruoyi.name}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;${ruoyi.version}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> version<span class="token punctuation">;</span>
	
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="mysql支持"><a href="#mysql支持" class="header-anchor">#</a> mysql支持</h2> <p>在单机模式时<code>nacos</code>使用嵌入式数据库实现数据的存储，不方便观察数据存储的基本情况。我们可以配置<code>mysql</code>数据库，可视化的查看数据的存储。</p> <p>1、安装数据库，版本要求：5.6.5+<br>
2、使用<code>sql/ry_config_xxxx</code>文件初始化<code>ry-config</code>数据库<br>
3、修改<code>conf/application.properties</code>文件增加<code>mysql</code>支持</p> <div class="language-properties extra-class"><pre class="language-properties"><code><span class="token comment"># db mysql</span>
<span class="token attr-name">spring.datasource.platform</span><span class="token punctuation">=</span><span class="token attr-value">mysql</span>
<span class="token attr-name">db.num</span><span class="token punctuation">=</span><span class="token attr-value">1</span>
<span class="token attr-name">db.url.0</span><span class="token punctuation">=</span><span class="token attr-value">jdbc:mysql://localhost:3306/ry-config?characterEncoding=utf8&amp;connectTimeout=1000&amp;socketTimeout=3000&amp;autoReconnect=true&amp;useUnicode=true&amp;useSSL=false&amp;serverTimezone=UTC</span>
<span class="token attr-name">db.user</span><span class="token punctuation">=</span><span class="token attr-value">root</span>
<span class="token attr-name">db.password</span><span class="token punctuation">=</span><span class="token attr-value">password</span>
</code></pre></div><p>这个<code>application.properties</code>指<code>nacos</code>的解压目录<code>nacos/conf</code>目录下的文件</p> <h2 id="集群部署"><a href="#集群部署" class="header-anchor">#</a> 集群部署</h2> <p>集群模式适用于生产环境需要依赖<code>mysql</code>，单机可不必，三个及以上<code>Nacos</code>节点才能构成集群。</p> <p>1、在<code>nacos</code>的解压目录<code>nacos/conf</code>目录下，修改配置文件<code>cluster.conf</code></p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token number">192.168</span>.100.101:8848
<span class="token number">192.168</span>.100.102:8848
<span class="token number">192.168</span>.100.103:8848
</code></pre></div><p>2、修改<code>bootstrap.yml</code>中的<code>server-addr</code>属性，添加对应集群地址。</p> <div class="language-properties extra-class"><pre class="language-properties"><code><span class="token attr-name">server-addr</span><span class="token punctuation">:</span> <span class="token attr-value">192.168.100.101:8848,192.168.100.102:8848,192.168.100.103:8848</span>
</code></pre></div><p>3、启动运行成功后显示如图表示成功。
<img src="https://oscimg.oschina.net/oscnet/up-2c91c7695642063639eb047b9757d8bad8a.png" alt="nacos"></p> <h2 id="控制台使用"><a href="#控制台使用" class="header-anchor">#</a> 控制台使用</h2> <h3 id="服务管理"><a href="#服务管理" class="header-anchor">#</a> 服务管理</h3> <p>开发者或者运维人员往往需要在服务注册后，通过友好的界面来查看服务的注册情况，包括当前系统注册的所有服务和每个服务的详情。并在有权限控制的情况下，进行服务的一些配置的编辑操作。<code>Nacos</code>在这个版本开放的控制台的服务发现部分，主要就是提供用户一个基本的运维页面，能够查看、编辑当前注册的服务。</p> <p><strong>服务列表管理</strong></p> <p>服务列表帮助用户以统一的视图管理其所有的微服务以及服务健康状态。</p> <p><img src="https://oscimg.oschina.net/oscnet/up-8bec3bdbeb39401eb93fc3349e723dc134a.png" alt="nacos"></p> <p>在服务列表页面点击详情，可以看到服务的详情。可以查看服务、集群和实例的基本信息。</p> <p><strong>服务流量权重支持及流量保护</strong></p> <p><code>Nacos</code>为用户提供了流量权重控制的能力，同时开放了服务流量的阈值保护，以帮助用户更好的保护服务服务提供者集群不被意外打垮。如下图所以，可以点击实例的编辑按钮，修改实例的权重。如果想增加实例的流量，可以将权重调大，如果不想实例接收流量，则可以将权重设为0。</p> <p><img src="https://oscimg.oschina.net/oscnet/up-4892b25e2fb5ff36e51d9294690f8b41438.png" alt="nacos"></p> <p><strong>服务元数据管理</strong></p> <p>Nacos提供多个维度的服务元数据的暴露，帮助用户存储自定义的信息。这些信息都是以K-V的数据结构存储，在控制台上，会以<code>{&quot;version&quot;:&quot;1.0&quot;,&quot;env&quot;:&quot;prod&quot;}</code>这样的格式展示。类似的，编辑元数据可以通过相同的格式进行。例如服务的元数据编辑，首先点击服务详情页右上角的“编辑服务”按钮，然后在元数据输入框输入：<code>{&quot;version&quot;:&quot;1.0&quot;,&quot;env&quot;:&quot;prod&quot;}</code>。</p> <p><img src="https://oscimg.oschina.net/oscnet/up-04bc240bdbc03401530f0ac9780eef4dbda.png" alt="nacos"></p> <p>点击确认，就可以在服务详情页面，看到服务的元数据已经更新了。</p> <p><img src="https://oscimg.oschina.net/oscnet/up-77c83cdbd6df72e7e093933657b15d0342b.png" alt="nacos"></p> <p><strong>服务优雅上下线</strong></p> <p>Nacos还提供服务实例的上下线操作，在服务详情页面，可以点击实例的“上线”或者“下线”按钮，被下线的实例，将不会包含在健康的实例列表里。</p> <p><img src="https://oscimg.oschina.net/oscnet/up-7004a2ff47edd6260c54b9de84263007259.png" alt="nacos"></p> <h3 id="配置管理"><a href="#配置管理" class="header-anchor">#</a> 配置管理</h3> <p>Nacos支持基于Namespace和Group的配置分组管理，以便用户更灵活的根据自己的需要按照环境或者应用、模块等分组管理微服务以及Spring的大量配置，在配置管理中主要提供了配置历史版本、回滚、订阅者查询等核心管理能力。</p> <p><img src="https://oscimg.oschina.net/oscnet/up-ed75d526051089fb9e7bffe6b1512ad9c91.png" alt="nacos"></p> <p><strong>配置的版本及一键回滚</strong></p> <p><code>Nacos</code>通过提供配置版本管理及其一键回滚能力，帮助用户改错配置的时候能够快速恢复，降低微服务系统在配置管理上的一定会遇到的可用性风险。
<img src="https://oscimg.oschina.net/oscnet/up-177797c0f922f36117bef5eb71030faf335.png" alt="nacos"></p> <p><strong>命名空间管理</strong></p> <p><code>Nacos</code>基于<code>Namespace</code>帮助用户逻辑隔离多个命名空间，这可以帮助用户更好的管理测试、预发、生产等多环境服务和配置，让每个环境的同一个配置（如数据库数据源）可以定义不同的值。</p> <p><img src="https://oscimg.oschina.net/oscnet/up-2f1bfb9e41fb0a71f8d526978ae1835018f.png" alt="nacos"></p> <h3 id="修改默认密码"><a href="#修改默认密码" class="header-anchor">#</a> 修改默认密码</h3> <p>修改用户名和密码，将<code>ry-config</code>中的<code>user</code>表<code>username</code>替换成你需要的登录账户，<code>password</code>改成你需要的密码，密码运行即可得到加密有算法。注意盐值是随机的，所以生成密码每次可能不一样，请不要担心。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BCryptPasswordEncoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span><span class="token string">&quot;ruoyi&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="会话时间"><a href="#会话时间" class="header-anchor">#</a> 会话时间</h3> <p>默认会话保持时间为30分钟。30分钟后需要重新登录认证。 暂时不支持修改该默认时间。</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.de0ffd6c.js" defer></script><script src="/assets/js/3.059a2ce3.js" defer></script><script src="/assets/js/27.7a40c7b4.js" defer></script>
  </body>
</html>
