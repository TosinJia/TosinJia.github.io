(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{942:function(t,a,e){"use strict";e.r(a);var s=e(56),r=Object(s.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"mysql"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#mysql"}},[t._v("#")]),t._v(" MySQL")]),t._v(" "),e("p"),e("div",{staticClass:"table-of-contents"},[e("ul",[e("li",[e("a",{attrs:{href:"#mysql"}},[t._v("MySQL")]),e("ul",[e("li",[e("a",{attrs:{href:"#在线资料"}},[t._v("在线资料")]),e("ul",[e("li",[e("a",{attrs:{href:"#官网"}},[t._v("官网")])]),e("li",[e("a",{attrs:{href:"#手册"}},[t._v("手册")]),e("ul",[e("li",[e("a",{attrs:{href:"#select-statement"}},[t._v("select statement")])]),e("li",[e("a",{attrs:{href:"#表"}},[t._v("表")]),e("ul",[e("li",[e("a",{attrs:{href:"#添加字段"}},[t._v("添加字段")])])])]),e("li",[e("a",{attrs:{href:"#视图"}},[t._v("视图")]),e("ul",[e("li",[e("a",{attrs:{href:"#问题"}},[t._v("问题")])])])]),e("li",[e("a",{attrs:{href:"#函数"}},[t._v("函数")]),e("ul",[e("li",[e("a",{attrs:{href:"#date-add"}},[t._v("DATE_ADD")])]),e("li",[e("a",{attrs:{href:"#date-format"}},[t._v("DATE_FORMAT")])]),e("li",[e("a",{attrs:{href:"#curdate"}},[t._v("CURDATE")])])])])])])])]),e("li",[e("a",{attrs:{href:"#常用指令"}},[t._v("常用指令")]),e("ul",[e("li",[e("a",{attrs:{href:"#mysqldump"}},[t._v("mysqldump")]),e("ul",[e("li",[e("a",{attrs:{href:"#整库备份还原"}},[t._v("整库备份还原")]),e("ul",[e("li",[e("a",{attrs:{href:"#linux定时备份"}},[t._v("linux定时备份")])])])]),e("li",[e("a",{attrs:{href:"#非整库"}},[t._v("非整库")])])])])])]),e("li",[e("a",{attrs:{href:"#日常"}},[t._v("日常")]),e("ul",[e("li",[e("a",{attrs:{href:"#日常问题"}},[t._v("日常问题")]),e("ul",[e("li",[e("a",{attrs:{href:"#timestamp与datatime"}},[t._v("timestamp与datatime")]),e("ul",[e("li",[e("a",{attrs:{href:"#选择"}},[t._v("选择")])]),e("li",[e("a",{attrs:{href:"#区别"}},[t._v("区别")])]),e("li",[e("a",{attrs:{href:"#总结"}},[t._v("总结")])])])]),e("li",[e("a",{attrs:{href:"#mysql不区分大小写设置"}},[t._v("MySQL不区分大小写设置")])]),e("li",[e("a",{attrs:{href:"#mysql字符集-utf8-和utf8mb4-的区别"}},[t._v("mysql字符集 utf8 和utf8mb4 的区别")])]),e("li",[e("a",{attrs:{href:"#sql-错误-1055-42000"}},[t._v("SQL 错误 [1055] [42000]:")]),e("ul",[e("li",[e("a",{attrs:{href:"#问题描述"}},[t._v("问题描述")])]),e("li",[e("a",{attrs:{href:"#问题处理"}},[t._v("问题处理")])])])])])]),e("li",[e("a",{attrs:{href:"#日常操作"}},[t._v("日常操作")]),e("ul",[e("li",[e("a",{attrs:{href:"#查询数据库中各表的数据量"}},[t._v("查询数据库中各表的数据量")])]),e("li",[e("a",{attrs:{href:"#查询数据库中各表的主键、自增标识"}},[t._v("查询数据库中各表的主键、自增标识")])]),e("li",[e("a",{attrs:{href:"#版本查看"}},[t._v("版本查看")])]),e("li",[e("a",{attrs:{href:"#null判断"}},[t._v("NULL判断")])]),e("li",[e("a",{attrs:{href:"#分组获取每组里边的第一条数据"}},[t._v("分组获取每组里边的第一条数据")])]),e("li",[e("a",{attrs:{href:"#修改root密码"}},[t._v("修改root密码")]),e("ul",[e("li",[e("a",{attrs:{href:"#_1-修改本地访问密码-mysqladmin"}},[t._v("1. 修改本地访问密码 mysqladmin")])]),e("li",[e("a",{attrs:{href:"#_2-修改远程访问密码"}},[t._v("2. 修改远程访问密码")])])])])])]),e("li",[e("a",{attrs:{href:"#数据表"}},[t._v("数据表")]),e("ul",[e("li",[e("a",{attrs:{href:"#备份"}},[t._v("备份")])]),e("li",[e("a",{attrs:{href:"#从查询结果中更新数据"}},[t._v("从查询结果中更新数据")])])])])])])])]),e("li",[e("a",{attrs:{href:"#教程"}},[t._v("教程")]),e("ul",[e("li",[e("a",{attrs:{href:"#建库脚本"}},[t._v("建库脚本")])]),e("li",[e("a",{attrs:{href:"#存储过程"}},[t._v("存储过程")]),e("ul",[e("li",[e("a",{attrs:{href:"#一、存储过程"}},[t._v("一、存储过程")]),e("ul",[e("li",[e("a",{attrs:{href:"#_1-1-什么是存储过程"}},[t._v("1.1 什么是存储过程")])]),e("li",[e("a",{attrs:{href:"#_1-2-数据库存储过程程序"}},[t._v("1.2 数据库存储过程程序")])]),e("li",[e("a",{attrs:{href:"#_1-3-为什么要使用存储程序"}},[t._v("1.3 为什么要使用存储程序")])])])]),e("li",[e("a",{attrs:{href:"#二、存储过程的使用步骤"}},[t._v("二、存储过程的使用步骤")]),e("ul",[e("li",[e("a",{attrs:{href:"#_2-1-存储过程的开发思想"}},[t._v("2.1 存储过程的开发思想")])]),e("li",[e("a",{attrs:{href:"#_2-2-存储过程的优缺点"}},[t._v("2.2 存储过程的优缺点")])]),e("li",[e("a",{attrs:{href:"#_2-3-mysql存储过程的官方文档"}},[t._v("2.3 MySQL存储过程的官方文档")])]),e("li",[e("a",{attrs:{href:"#_2-3-存储过程的使用语法"}},[t._v("2.3 存储过程的使用语法")])])])]),e("li",[e("a",{attrs:{href:"#三、存储过程的变量和赋值"}},[t._v("三、存储过程的变量和赋值")]),e("ul",[e("li",[e("a",{attrs:{href:"#_3-1-局部变量"}},[t._v("3.1 局部变量")])]),e("li",[e("a",{attrs:{href:"#_3-2-用户变量"}},[t._v("3.2 用户变量")])]),e("li",[e("a",{attrs:{href:"#_3-3-会话变量"}},[t._v("3.3 会话变量")])]),e("li",[e("a",{attrs:{href:"#_3-4-全局变量"}},[t._v("3.4 全局变量")])]),e("li",[e("a",{attrs:{href:"#_3-5-入参出参"}},[t._v("3.5 入参出参")])])])]),e("li",[e("a",{attrs:{href:"#四、存储过程中的流程控制"}},[t._v("四、存储过程中的流程控制")]),e("ul",[e("li",[e("a",{attrs:{href:"#_4-1-if-条件判断-推荐"}},[t._v("4.1 if 条件判断（推荐）")])]),e("li",[e("a",{attrs:{href:"#_4-2-case条件判断"}},[t._v("4.2 case条件判断")])]),e("li",[e("a",{attrs:{href:"#_4-3-loop循环"}},[t._v("4.3 loop循环")])]),e("li",[e("a",{attrs:{href:"#_4-4-repeat循环"}},[t._v("4.4 repeat循环")])]),e("li",[e("a",{attrs:{href:"#_4-5-while循环"}},[t._v("4.5 while循环")])]),e("li",[e("a",{attrs:{href:"#_4-6-流程控制语句-继续、结束"}},[t._v("4.6 流程控制语句（继续、结束）")])])])]),e("li",[e("a",{attrs:{href:"#五、游标与handler"}},[t._v("五、游标与handler")]),e("ul",[e("li",[e("a",{attrs:{href:"#_5-1-游标"}},[t._v("5.1 游标")])]),e("li",[e("a",{attrs:{href:"#_5-2-handler句柄"}},[t._v("5.2 handler句柄")])])])])])]),e("li",[e("a",{attrs:{href:"#mysql数据库高级"}},[t._v("MySQL数据库高级")]),e("ul",[e("li",[e("a",{attrs:{href:"#其他参考"}},[t._v("其他参考")])])])]),e("li",[e("a",{attrs:{href:"#mysql安装配置"}},[t._v("MySQL安装配置")]),e("ul",[e("li",[e("a",{attrs:{href:"#mysql-5-7-39-rpm包安装"}},[t._v("mysql-5.7.39 RPM包安装")]),e("ul",[e("li",[e("a",{attrs:{href:"#_1-下载地址"}},[t._v("1. 下载地址")])]),e("li",[e("a",{attrs:{href:"#_2-检测本地包"}},[t._v("2. 检测本地包")])]),e("li",[e("a",{attrs:{href:"#_3-安装"}},[t._v("3. 安装")]),e("ul",[e("li",[e("a",{attrs:{href:"#_3-1-下载解压安装包"}},[t._v("3.1 下载解压安装包")])])])]),e("li",[e("a",{attrs:{href:"#_4-启动"}},[t._v("4. 启动")])]),e("li",[e("a",{attrs:{href:"#_5-开启远程访问权限"}},[t._v("5. 开启远程访问权限")]),e("ul",[e("li",[e("a",{attrs:{href:"#第一种-改表法"}},[t._v("第一种（改表法）")])]),e("li",[e("a",{attrs:{href:"#第二种-授权法"}},[t._v("第二种（授权法）")])])])]),e("li",[e("a",{attrs:{href:"#_6-开机自启"}},[t._v("6.开机自启")])]),e("li",[e("a",{attrs:{href:"#_7-配置调整"}},[t._v("7.配置调整")])]),e("li",[e("a",{attrs:{href:"#其他"}},[t._v("其他")]),e("ul",[e("li",[e("a",{attrs:{href:"#linux平台mysql的安装目录"}},[t._v("Linux平台MySQL的安装目录")])]),e("li",[e("a",{attrs:{href:"#命令登录-mysql"}},[t._v("命令登录 MySQL")])]),e("li",[e("a",{attrs:{href:"#异常处理"}},[t._v("异常处理")])])])])])]),e("li",[e("a",{attrs:{href:"#mysql-5-7-28-rpm包安装"}},[t._v("mysql-5.7.28 RPM包安装")]),e("ul",[e("li",[e("a",{attrs:{href:"#_1-官网下载地址"}},[t._v("1. 官网下载地址")])]),e("li",[e("a",{attrs:{href:"#_2-检测本地包"}},[t._v("2. 检测本地包")])]),e("li",[e("a",{attrs:{href:"#_3-安装"}},[t._v("3. 安装")]),e("ul",[e("li",[e("a",{attrs:{href:"#_1-上传安装包到指定目录"}},[t._v("1. 上传安装包到指定目录")])]),e("li",[e("a",{attrs:{href:"#_2-解压安装包"}},[t._v("2. 解压安装包")])]),e("li",[e("a",{attrs:{href:"#_3-安装"}},[t._v("3. 安装")])])])]),e("li",[e("a",{attrs:{href:"#_4-启动"}},[t._v("4. 启动")]),e("ul",[e("li",[e("a",{attrs:{href:"#_1-查看mysql服务是否启动"}},[t._v("1 查看mysql服务是否启动")])]),e("li",[e("a",{attrs:{href:"#_2-启动mysql服务"}},[t._v("2 启动mysql服务")])]),e("li",[e("a",{attrs:{href:"#_3-查看默认生成的密码"}},[t._v("3 查看默认生成的密码")])]),e("li",[e("a",{attrs:{href:"#_4-登录"}},[t._v("4 登录")])]),e("li",[e("a",{attrs:{href:"#_5-修改密码"}},[t._v("5 修改密码")]),e("ul",[e("li",[e("a",{attrs:{href:"#_1-修改密码规则"}},[t._v("1 修改密码规则")])]),e("li",[e("a",{attrs:{href:"#_2-修改密码"}},[t._v("2 修改密码")])])])])])]),e("li",[e("a",{attrs:{href:"#_5-远程访问"}},[t._v("5. 远程访问")])]),e("li",[e("a",{attrs:{href:"#_6-补充操作"}},[t._v("6. 补充操作")])])])])])])])])])]),e("p"),t._v(" "),e("h2",{attrs:{id:"在线资料"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#在线资料"}},[t._v("#")]),t._v(" 在线资料")]),t._v(" "),e("h3",{attrs:{id:"官网"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#官网"}},[t._v("#")]),t._v(" 官网")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://www.mysql.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("MySQL"),e("OutboundLink")],1),t._v(" "),e("ul",[e("li",[t._v("账户：公用oracle账户")])])])]),t._v(" "),e("h3",{attrs:{id:"手册"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#手册"}},[t._v("#")]),t._v(" 手册")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://dev.mysql.com/doc/",target:"_blank",rel:"noopener noreferrer"}},[t._v("MySQL :: MySQL Documentation"),e("OutboundLink")],1),t._v(" "),e("ul",[e("li",[t._v("https://dev.mysql.com/doc/refman/5.7/en/\n"),e("ul",[e("li",[t._v("https://dev.mysql.com/doc/refman/5.7/en/date-and-time-functions.html\n"),e("ul",[e("li",[t._v("https://dev.mysql.com/doc/refman/5.7/en/date-and-time-functions.html#function_str-to-date")])])]),t._v(" "),e("li",[e("a",{attrs:{href:"https://dev.mysql.com/doc/refman/5.7/en/data-types.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("MySQL :: MySQL 5.7 Reference Manual :: 11 Data Types"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://dev.mysql.com/doc/refman/5.7/en/create-view.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("MySQL :: MySQL 5.7 Reference Manual :: 13.1.21 CREATE VIEW Statement"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://dev.mysql.com/doc/refman/5.7/en/select.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("MySQL :: MySQL 5.7 Reference Manual :: 13.2.9 SELECT Statement"),e("OutboundLink")],1)])])]),t._v(" "),e("li",[e("a",{attrs:{href:"http://www.mysqlab.net/docs/view/refman-5.1-zh/chapter/index.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("MySQL 5.1 中文参考手册 - 目录"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://www.mysqlzh.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("MySQL 中文文档 | MySQL 中文网"),e("OutboundLink")],1)])])])]),t._v(" "),e("h4",{attrs:{id:"select-statement"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#select-statement"}},[t._v("#")]),t._v(" select statement")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://www.cnblogs.com/hrhguanli/p/3826218.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("MySQL 通配符学习小结"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://dev.mysql.com/doc/refman/5.7/en/regexp.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("MySQL :: MySQL 5.7 Reference Manual :: 12.8.2 Regular Expressions"),e("OutboundLink")],1)])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("select id, word, ipa_phonetic_symbol, pronunciation, audio, meaning, update_time, create_time from dict_word_info WHERE word like concat('%', 'a_', '%')\nselect id, word, ipa_phonetic_symbol, pronunciation, audio, meaning, update_time, create_time from dict_word_info WHERE word rlike '^[abc]+$'\nselect id, word, ipa_phonetic_symbol, pronunciation, audio, meaning, update_time, create_time from dict_word_info WHERE word regexp '^[abc]+$' \n")])])]),e("h4",{attrs:{id:"表"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#表"}},[t._v("#")]),t._v(" 表")]),t._v(" "),e("h5",{attrs:{id:"添加字段"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#添加字段"}},[t._v("#")]),t._v(" 添加字段")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("ALTER TABLE `ry-vue`.dict_word_info ADD meaning varchar(1024) NULL COMMENT '含义';\nALTER TABLE `ry-vue`.dict_word_info CHANGE meaning meaning varchar(1024) NULL COMMENT '含义' AFTER audio;\n")])])]),e("h4",{attrs:{id:"视图"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#视图"}},[t._v("#")]),t._v(" 视图")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("create [or replace] view view_outdict_query_info as\nselect\n\tdwi.word query_word,\n\tdwi.word,\n\tdwi.ipa_phonetic_symbol,\n\tdwi.pronunciation\nfrom\n\tdict_word_info dwi\nunion all\nselect\n\toi.query_word,\n\tdwi.word,\n\tdwi.ipa_phonetic_symbol,\n\tdwi.pronunciation\nfrom\n\toutdict_info oi\nleft join dict_word_info dwi on\n\toi.word = dwi.word\nwhere\n\toi.dict_type = '1'\n")])])]),e("h5",{attrs:{id:"问题"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#问题"}},[t._v("#")]),t._v(" 问题")]),t._v(" "),e("ol",[e("li",[t._v("SQL 错误 [1064] [42000]: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'union all")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("create view view_outdict_query_info as( select  dwi.word query_word,  dwi.word,  dwi.pronunciation from  dict_word_info dwi union all select  oi.query_word,  dwi.word,  dwi.pronunciation from  outdict_info oi left join dict_word_info dwi on  oi.word = dwi.word where  oi.dict_type = '1')\n")])])]),e("h4",{attrs:{id:"函数"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#函数"}},[t._v("#")]),t._v(" 函数")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://dev.mysql.com/doc/refman/5.7/en/date-and-time-functions.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("MySQL :: MySQL 5.7 Reference Manual :: 12.7 Date and Time Functions"),e("OutboundLink")],1)])]),t._v(" "),e("p",[t._v("select current_timestamp(), now(), curdate();")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('"current_timestamp()","now()","curdate()"\n"2021-11-16 11:23:39","2021-11-16 11:23:39","2021-11-16"\n')])])]),e("ul",[e("li",[e("a",{attrs:{href:"https://dev.mysql.com/doc/refman/5.7/en/string-functions.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("MySQL :: MySQL 5.7 Reference Manual :: 12.8 String Functions and Operators"),e("OutboundLink")],1),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://dev.mysql.com/doc/refman/5.7/en/string-functions.html#function_find-in-set",target:"_blank",rel:"noopener noreferrer"}},[t._v("function_find-in-set"),e("OutboundLink")],1)])])])]),t._v(" "),e("h5",{attrs:{id:"date-add"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#date-add"}},[t._v("#")]),t._v(" DATE_ADD")]),t._v(" "),e("ul",[e("li",[t._v("https://www.w3school.com.cn/sql/func_date_add.asp")])]),t._v(" "),e("h5",{attrs:{id:"date-format"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#date-format"}},[t._v("#")]),t._v(" DATE_FORMAT")]),t._v(" "),e("ul",[e("li",[t._v("https://www.w3school.com.cn/sql/func_date_format.asp")])]),t._v(" "),e("h5",{attrs:{id:"curdate"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#curdate"}},[t._v("#")]),t._v(" CURDATE")]),t._v(" "),e("ul",[e("li",[t._v("https://www.w3school.com.cn/sql/func_curdate.asp")])]),t._v(" "),e("h2",{attrs:{id:"常用指令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#常用指令"}},[t._v("#")]),t._v(" 常用指令")]),t._v(" "),e("h3",{attrs:{id:"mysqldump"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#mysqldump"}},[t._v("#")]),t._v(" mysqldump")]),t._v(" "),e("ul",[e("li",[e("p",[e("a",{attrs:{href:"https://blog.csdn.net/mashuai720/article/details/83347029",target:"_blank",rel:"noopener noreferrer"}},[t._v("MySQL5.7 --- mysqldump 备份与恢复"),e("OutboundLink")],1)])]),t._v(" "),e("li",[e("p",[t._v("软件开发/database/工具/DBeaver")])])]),t._v(" "),e("h4",{attrs:{id:"整库备份还原"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#整库备份还原"}},[t._v("#")]),t._v(" 整库备份还原")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("[root@etc ~]# mysqldump -help\nUsage: mysqldump [OPTIONS] database [tables]\nOR     mysqldump [OPTIONS] --databases [OPTIONS] DB1 [DB2 DB3...]\nOR     mysqldump [OPTIONS] --all-databases [OPTIONS]\nFor more options, use mysqldump --help\n\n# 调用mysqldump带有--all-databases选项备份所有的数据库\n# mysqldump -uroot -pClgg7890 --all-databases > Shaanxi_NetworkFreight_20220310.sql\n# 调用mysqldump带有- -databases选项备份指定的数据库\n# mysqldump -uroot -pClgg7890 --databases gateway yy_framework yy_matchup yy_tms > Shaanxi_NetworkFreight_20220310_used.sql\n[root@localhost ~]# mysqldump -uroot -pClgg7890 --databases clgg_base > clgg_base20210929.sql\nmysqldump: [Warning] Using a password on the command line interface can be insecure.\n\n[root@etc ~]# mysql -h127.0.0.1 -uroot -p123456 -p123456 --default-character-set=utf8\nmysql: [Warning] Using a password on the command line interface can be insecure.\nWelcome to the MySQL monitor.  Commands end with ; or \\g.\nYour MySQL connection id is 3\nServer version: 5.7.29 MySQL Community Server (GPL)\n\nCopyright (c) 2000, 2020, Oracle and/or its affiliates. All rights reserved.\n\nOracle is a registered trademark of Oracle Corporation and/or its\naffiliates. Other names may be trademarks of their respective\nowners.\n\nType 'help;' or '\\h' for help. Type '\\c' to clear the current input statement.\n\nmysql> show databases;\n+--------------------+\n| Database           |\n+--------------------+\n| information_schema |\n| clgg_base          |\n| mysql              |\n| performance_schema |\n| sys                |\n+--------------------+\n5 rows in set (0.01 sec)\n\nmysql> drop database clgg_base;\nQuery OK, 120 rows affected (1.92 sec)\n\nmysql> quit;\nBye\n\n[root@etc ~]# mysql -h127.0.0.1 -uroot -p123456 < clgg_base20210929.sql \nmysql: [Warning] Using a password on the command line interface can be insecure.\n")])])]),e("h5",{attrs:{id:"linux定时备份"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#linux定时备份"}},[t._v("#")]),t._v(" linux定时备份")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('[root@clggdb ~]# crontab -l\n0 0 * * * sh /home/db/db_back_up.sh\n* * * * * /bin/bash /home/dbspc_redhat_centos_x64/spc1/startspc.sh\n20 11 * * * sh /home/db/clean_redundancy_db_back_up.sh\n\n[root@clggdb ~]# cat /home/db/db_back_up.sh\n#!/bin/bash\n#在使用之前，请提前创建以下各个目录\n#获取当前时间\ndate_now=$(date "+%Y%m%d-%H%M%S")\nbackUpFolder=/home/db/backup\ndb_name="clgg_base"\n#定义备份文件名\nfileName="${db_name}_${date_now}.sql"\n#定义备份文件目录\nbackUpFileName="${backUpFolder}/${fileName}"\necho "starting backup mysql ${db_name} at ${date_now}."\nmysqldump  --lock-all-tables --flush-logs ${db_name} > ${backUpFileName}\necho "backup process finished!"\n\n# 清除指定日期和天数的sql文件\n[root@clggdb ~]# cat /home/db/clean_redundancy_db_back_up.sh\nfind /home/db/backup -mtime +50 -name \'*.sql\' -exec rm -rf {} \\;\n')])])]),e("h4",{attrs:{id:"非整库"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#非整库"}},[t._v("#")]),t._v(" 非整库")]),t._v(" "),e("ol",[e("li",[t._v("备份")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("[root@localhost database_bak]# mysqldump -h 127.0.0.1 -uroot -pClgg7890 -R -i --set-gtid-purged=OFF clgg_base1 > /root/database_bak/clgg_base1_20211022-1.sql\nmysqldump: [Warning] Using a password on the command line interface can be insecure.\n\n存储过程缺失-R\n[root@localhost database_bak]# mysqldump -h 127.0.0.1 -uroot -pClgg7890 -R -i --no-data clgg_base1 > /root/database_bak/clgg_base1_20211022-2.sql\nmysqldump: [Warning] Using a password on the command line interface can be insecure.\n")])])]),e("ul",[e("li",[t._v("-R:指定备份存储过程")]),t._v(" "),e("li",[t._v("-i:备份注释")]),t._v(" "),e("li",[t._v("--no-data:如果不需要数据")]),t._v(" "),e("li",[t._v("-h:指定服务器")]),t._v(" "),e("li",[t._v("-u:用户名")]),t._v(" "),e("li",[t._v("-p:密码")])]),t._v(" "),e("ol",{attrs:{start:"2"}},[e("li",[t._v("恢复数据库")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("mysql> drop database clgg_base;\nQuery OK, 120 rows affected (3.06 sec)\n\n# utf8 utf8_general_ci\nmysql> CREATE DATABASE clgg_base DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci;\nQuery OK, 1 row affected (0.01 sec)\n\nmysql> CREATE DATABASE IF NOT EXISTS clgg_base DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci;\nQuery OK, 1 row affected, 1 warning (0.00 sec)\n\nmysql> use clgg_base;\n\nmysql> source /root/clgg_base_20211015-000001.sql\n\n")])])]),e("h2",{attrs:{id:"日常"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#日常"}},[t._v("#")]),t._v(" 日常")]),t._v(" "),e("h3",{attrs:{id:"日常问题"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#日常问题"}},[t._v("#")]),t._v(" 日常问题")]),t._v(" "),e("h4",{attrs:{id:"timestamp与datatime"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#timestamp与datatime"}},[t._v("#")]),t._v(" timestamp与datatime")]),t._v(" "),e("p",[t._v("参考")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://cloud.tencent.com/developer/article/1541699",target:"_blank",rel:"noopener noreferrer"}},[t._v("MySQL 中 datetime 和 timestamp 的区别与选择"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://blog.csdn.net/u014696474/article/details/70568733",target:"_blank",rel:"noopener noreferrer"}},[t._v("MYSQL-datatime和timestamp的区别"),e("OutboundLink")],1)])]),t._v(" "),e("h5",{attrs:{id:"选择"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#选择"}},[t._v("#")]),t._v(" 选择")]),t._v(" "),e("ol",[e("li",[t._v("如果在时间上要超过Linux时间的，或者服务器时区不一样的就建议选择 datetime。")]),t._v(" "),e("li",[t._v("如果是想要使用自动插入时间或者自动更新时间功能的，可以使用timestamp。")]),t._v(" "),e("li",[t._v("如果只是想表示年、日期、时间的还可以使用 year、 date、 time，它们分别占据 1、3、3 字节，而datetime就是它们的集合。")])]),t._v(" "),e("h5",{attrs:{id:"区别"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#区别"}},[t._v("#")]),t._v(" 区别")]),t._v(" "),e("ol",[e("li",[t._v("对于timestamp来说，如果储存时的时区和检索时的时区不一样，那么拿出来的数据也不一样。对于datetime来说，存什么拿到的就是什么。")]),t._v(" "),e("li",[t._v("如果存进去的是NULL，timestamp会自动储存当前时间，而datetime会储存NULL。")])]),t._v(" "),e("h5",{attrs:{id:"总结"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[t._v("#")]),t._v(" 总结")]),t._v(" "),e("ol",[e("li",[t._v("TIMESTAMP和DATETIME除了存储范围和存储方式不一样，没有太大区别。当然，对于跨时区的业务，TIMESTAMP更为合适。")]),t._v(" "),e("li",[t._v("timestamp有自动初始化和更新，当你update某条记录的时候，该列值会自动更新，这是和datatime最大的区别。")])]),t._v(" "),e("h4",{attrs:{id:"mysql不区分大小写设置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#mysql不区分大小写设置"}},[t._v("#")]),t._v(" MySQL不区分大小写设置")]),t._v(" "),e("blockquote",[e("p",[t._v("修改配置后需要重启服务，如果之前的数据库删除不了，将配置调回去再删。")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("[root@CentOS-7 imysql]# docker exec -it imysql /bin/bash\n\n[mysqld]\n...\n\nlower_case_table_names=1\n\n")])])]),e("ul",[e("li",[t._v("sql")])]),t._v(" "),e("div",{staticClass:"language-SQL extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("show")]),t._v(" variables "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("like")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"%case%"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nlower_case_file_system\t"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("OFF")]),t._v("\nlower_case_table_names\t"),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n")])])]),e("ul",[e("li",[t._v("参考\n"),e("ul",[e("li",[e("a",{attrs:{href:"https://blog.csdn.net/wangkun_j/article/details/117651603",target:"_blank",rel:"noopener noreferrer"}},[t._v("MySQL不区分大小写设置"),e("OutboundLink")],1)])])])]),t._v(" "),e("h4",{attrs:{id:"mysql字符集-utf8-和utf8mb4-的区别"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#mysql字符集-utf8-和utf8mb4-的区别"}},[t._v("#")]),t._v(" mysql字符集 utf8 和utf8mb4 的区别")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://blog.csdn.net/qq_37054881/article/details/90023611",target:"_blank",rel:"noopener noreferrer"}},[t._v("mysql字符集 utf8 和utf8mb4 的区别"),e("OutboundLink")],1)])]),t._v(" "),e("h4",{attrs:{id:"sql-错误-1055-42000"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#sql-错误-1055-42000"}},[t._v("#")]),t._v(" SQL 错误 [1055] [42000]:")]),t._v(" "),e("h5",{attrs:{id:"问题描述"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#问题描述"}},[t._v("#")]),t._v(" 问题描述")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("org.jkiss.dbeaver.model.sql.DBSQLException: SQL 错误 [1055] [42000]: Expression #2 of SELECT list is not in GROUP BY clause and contains nonaggregated column 's.tenant_id' which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_by\n")])])]),e("ul",[e("li",[t._v("相关sql")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("SELECT\n\tcount(0)\nFROM\n\t(\n\tSELECT\n\t\ts.id,\n\t\ts.tenant_id,\n\t\ts.create_time,\n\t\ts.modify_time,\n\t\ts.load_place,\n\t\ts.load_place_code,\n\t\ts.load_place_address,\n\t\ts.unload_place,\n\t\ts.unload_place_code,\n\t\ts.unload_place_address,\n\t\ts.sender,\n\t\ts.sender_phone,\n\t\ts.recipient,\n\t\ts.recipient_phone,\n\t\ts.goods_name,\n\t\ts.goods_type,\n\t\ts.use_type,\n\t\ts.vehicle_type,\n\t\ts.vehicle_length,\n\t\ts.goods_weight,\n\t\ts.goods_body,\n\t\ts.load_time,\n\t\ts.load_way,\n\t\ts.goods_freight,\n\t\ts.price_negotiation,\n\t\ts.remarks,\n\t\ts.status,\n\t\ts.is_assign,\n\t\ts.reasons_expiration,\n\t\ts.valuation_way,\n\t\ts.code,\n\t\ts.transport_tenant_id transporttenantid,\n\t\ts.is_cancel is_cancel,\n\t\ts.cancel_reason cancel_reason,\n\t\ts.send_area_id,\n\t\ts.arrive_area_id,\n\t\tu.link_man,\n\t\tu.tenant_head_portrait,\n\t\tu.transaction_count,\n\t\tu.tran_transaction_count,\n\t\tp.cash_payment,\n\t\tp.unpaid,\n\t\tp.oil_card,\n\t\tp.arrrival_payment,\n\t\tp.oil_card_deposit,\n\t\tp.other_amount,\n\t\tp.back_bill_deposit,\n\t\tc.company_name company_name,\n\t\tc.address company_address,\n\t\ttr.tenant_id tran_tenant_id,\n\t\ttr.link_man tran_link_man,\n\t\ttr.tenant_head_portrait tran_tenant_head_portrait,\n\t\ttr.link_phone,\n\t\ttr.driver,\n\t\ttr.car_number,\n\t\ttr.code tran_code,\n\t\ttr.tran_transaction_count v_tran_transaction_count,\n\t\ttr.send_goods_count tran_send_goods_count,\n\t\ttr.company_name tran_company_name,\n\t\ttr.address tran_company_address,\n\t\ttr.load_time tran_load_time\n\tFROM\n\t\tv_source_goods_capacity s\n\tLEFT JOIN company_info c ON\n\t\tc.tenant_id = s.tenant_id\n\tLEFT JOIN my_user_info u ON\n\t\tu.id = s.tenant_id\n\tLEFT JOIN biz_payment_way p ON\n\t\tp.source_goods_id = s.id\n\tLEFT JOIN v_transport_info tr ON\n\t\ttr.is_deleted = 0\n\t\tAND tr.source_goods_id = s.id\n\tWHERE\n\t\ts.transport_tenant_id = 170\n\tGROUP BY\n\t\ts.id) table_count;\n")])])]),e("h5",{attrs:{id:"问题处理"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#问题处理"}},[t._v("#")]),t._v(" 问题处理")]),t._v(" "),e("div",{staticClass:"language-sql extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" version"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SELECT")]),t._v(" @"),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@GLOBAL.sql_mode")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" @"),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@SESSION.sql_mode")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("set")]),t._v(" sql_mode"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n")])])]),e("ul",[e("li",[t._v("shell")])]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@etc ~"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# vim /etc/my.cnf ")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("mysqld"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("explicit_defaults_for_timestamp")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("true\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("basedir")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/usr/local/mysql\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("datadir")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/usr/local/mysql/data\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("port")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("3306")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("socket")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/usr/local/mysql/data/mysql.sock\ncharacter-set-server"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("utf8\nlog-error"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/usr/local/mysql/data/mysqld.log\npid-file"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/usr/local/mysql/data/mysqld.pid\n\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("sql_mode")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION\n\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@etc ~"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# service mysqld restart")]),t._v("\nShutting down MySQL"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(" SUCCESS"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v(" \nStarting MySQL"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(" SUCCESS"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v(" \n")])])]),e("ul",[e("li",[e("a",{attrs:{href:"https://blog.csdn.net/helloxiaozhe/article/details/78570016",target:"_blank",rel:"noopener noreferrer"}},[t._v("MySql出现错误：ERROR 1055 (42000) 和 MYSQL的WARNINGS 和 ERRORS查询细节"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://www.cnblogs.com/kiko2014551511/p/11527480.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("mysql的sql_mode设置"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://www.php.cn/mysql-tutorials-480982.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("MySQL如何在linux中重新启动"),e("OutboundLink")],1)])]),t._v(" "),e("h3",{attrs:{id:"日常操作"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#日常操作"}},[t._v("#")]),t._v(" 日常操作")]),t._v(" "),e("h4",{attrs:{id:"查询数据库中各表的数据量"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#查询数据库中各表的数据量"}},[t._v("#")]),t._v(" 查询数据库中各表的数据量")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("select t.TABLE_NAME, t.TABLE_ROWS from information_schema.TABLES t where t.TABLE_SCHEMA ='ruoyi-vue-activiti7' and t.TABLE_NAME in (\n'act_evt_log',\n'act_ru_variable'\n) order by t.TABLE_ROWS desc;\n")])])]),e("h4",{attrs:{id:"查询数据库中各表的主键、自增标识"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#查询数据库中各表的主键、自增标识"}},[t._v("#")]),t._v(" 查询数据库中各表的主键、自增标识")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("-- 所有表主键 mysql查询数据库中各表的主键、自增标识\nSELECT\n  t.TABLE_NAME,\n  c.COLUMN_NAME,\n  ts.AUTO_INCREMENT\nFROM\n  INFORMATION_SCHEMA.TABLE_CONSTRAINTS AS t,\n  information_schema.TABLES AS ts,\n  information_schema.KEY_COLUMN_USAGE AS c\nWHERE\n  t.TABLE_NAME = ts.TABLE_NAME\n  AND ts.TABLE_NAME  = c.TABLE_NAME\n  AND t.TABLE_SCHEMA = 'truck_sell_test'\n  AND t.CONSTRAINT_TYPE = 'PRIMARY KEY'\n  ORDER BY ts.`AUTO_INCREMENT` DESC;\n")])])]),e("h4",{attrs:{id:"版本查看"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#版本查看"}},[t._v("#")]),t._v(" 版本查看")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("select version();\n")])])]),e("h4",{attrs:{id:"null判断"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#null判断"}},[t._v("#")]),t._v(" NULL判断")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("-- SQL 错误 [1052] [23000]: Column 'phone' in field list is ambiguous\nselect phone from bak_sys_client_20220107 a LEFT JOIN (select phone from sys_client) b on a.phone=b.phone;\n\nselect a.phone,b.phone phone2 from bak_sys_client_20220107 a LEFT JOIN (select distinct phone from sys_client) b on a.phone=b.phone where b.phone is null;\n")])])]),e("h4",{attrs:{id:"分组获取每组里边的第一条数据"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#分组获取每组里边的第一条数据"}},[t._v("#")]),t._v(" 分组获取每组里边的第一条数据")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("select\n\tiecur1.*\nfrom\n\ticbc_etc_card_update_record iecur1,\n\t(\n\tselect\n\t\tservice_order_no,\n\t\tunit_type,\n\t\tMAX(create_time) create_time\n\tfrom\n\t\ticbc_etc_card_update_record\n\tgroup by\n\t\tservice_order_no,\n\t\tunit_type ) as iecur2\nwhere\n\tiecur1.service_order_no = iecur2.service_order_no\n\tand iecur1.unit_type = iecur2.unit_type\n\tand iecur1.create_time = iecur2.create_time\norder by\n\tiecur1.service_order_no,\n\tiecur1.unit_type,\n\tiecur1.create_time desc\n")])])]),e("h4",{attrs:{id:"修改root密码"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#修改root密码"}},[t._v("#")]),t._v(" 修改root密码")]),t._v(" "),e("ul",[e("li",[e("p",[e("a",{attrs:{href:"https://blog.csdn.net/qq_40757240/article/details/118068317",target:"_blank",rel:"noopener noreferrer"}},[t._v("MySQL修改root用户密码"),e("OutboundLink")],1)])]),t._v(" "),e("li",[e("p",[e("a",{attrs:{href:"https://blog.csdn.net/u011311291/article/details/87923540",target:"_blank",rel:"noopener noreferrer"}},[t._v("mysql修改root密码(包括远程登录密码)"),e("OutboundLink")],1)])])]),t._v(" "),e("h5",{attrs:{id:"_1-修改本地访问密码-mysqladmin"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-修改本地访问密码-mysqladmin"}},[t._v("#")]),t._v(" 1. 修改本地访问密码 mysqladmin")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('[root@SystemFramework ~]# mysqladmin -u root -h 127.0.0.1 -p password "123456" --\x3e 新密码\nEnter password: 旧密码\nmysqladmin: [Warning] Using a password on the command line interface can be insecure.\nWarning: Since password will be sent to server in plain text, use ssl connection to ensure password safety.\n')])])]),e("ul",[e("li",[t._v("语法参数说明如下：\n"),e("ul",[e("li",[t._v("usermame 指需要修改密码的用户名称，在这里指定为 root 用户；")]),t._v(" "),e("li",[t._v("hostname 指需要修改密码的用户主机名，该参数可以不写，默认是 localhost；")]),t._v(" "),e("li",[t._v("password 为关键字，而不是指旧密码；")]),t._v(" "),e("li",[t._v("newpwd 为新设置的密码，必须用双引号括起来。如果使用单引号会引发错误，可能会造成修改后的密码不是你想要的。")])])])]),t._v(" "),e("h5",{attrs:{id:"_2-修改远程访问密码"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-修改远程访问密码"}},[t._v("#")]),t._v(" 2. 修改远程访问密码")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("[root@SystemFramework ~]# mysql -uroot -h127.0.0.1 -uroot -p123456 \nmysql> ALTER USER 'root'@'%' IDENTIFIED BY '123456';\nQuery OK, 0 rows affected (0.01 sec)\n")])])]),e("h3",{attrs:{id:"数据表"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#数据表"}},[t._v("#")]),t._v(" 数据表")]),t._v(" "),e("h4",{attrs:{id:"备份"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#备份"}},[t._v("#")]),t._v(" 备份")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("SELECT * FROM channel_month_rebate;\ncreate table tmp_channel_month_rebate as SELECT * FROM channel_month_rebate;\nSELECT * FROM tmp_channel_month_rebate;\nDROP table tmp_channel_month_rebate;\n")])])]),e("h4",{attrs:{id:"从查询结果中更新数据"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#从查询结果中更新数据"}},[t._v("#")]),t._v(" 从查询结果中更新数据")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://blog.csdn.net/qq_39840681/article/details/79401795",target:"_blank",rel:"noopener noreferrer"}},[t._v("mysql update select 从查询结果中更新数据"),e("OutboundLink")],1)]),t._v(" "),e("li",[t._v("update select 语句(注意:必须使用inner join) 语法")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("UPDATE a\nINNER JOIN ( SELECT yy FROM b ) c ON a.id = c.id \nSET a.xx = c.yy\n")])])]),e("ul",[e("li",[t._v("demo")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("UPDATE bak_sso_20220107_sys_client_update a\n\tINNER JOIN ( \n\t\tselect sc.user_name, sc.user_code, sc1.user_code user_code_org from bak_sso_20220107_sys_client_update sc left join bak_sys_client_20220107 sc1 on sc.user_name =sc1.user_name where sc.user_code!=sc1.user_code \n\t) b ON a.user_name = b.user_name \nSET a.user_code = b.user_code_org;\n-- SET a.user_code = 999999;\n\n# 更新后验证总是没更新 原因\n-- 同一个user_name在bak_sys_client_20220107有两条数据，bak_sso_20220107_sys_client_update一条数据\n")])])]),e("h1",{attrs:{id:"教程"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#教程"}},[t._v("#")]),t._v(" 教程")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://songyu.blog.csdn.net/article/details/109108573",target:"_blank",rel:"noopener noreferrer"}},[t._v("MySQL常用操作指令大全"),e("OutboundLink")],1)]),t._v(" "),e("li",[t._v("http://c.biancheng.net/view/2413.html")])]),t._v(" "),e("h2",{attrs:{id:"建库脚本"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#建库脚本"}},[t._v("#")]),t._v(" 建库脚本")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("-- 查看MYSQL数据库服务器和数据库字符集 \nshow variables like '%character%';\nshow variables like 'collation%';\n\n-- 建库脚本\nCREATE DATABASE test DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci;\n")])])]),e("ul",[e("li",[t._v("样例脚本")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("DROP DATABASE IF EXISTS `ry-vue`;\n\nCREATE DATABASE `ry-vue` DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci;\n\nSET NAMES utf8mb4;\nSET FOREIGN_KEY_CHECKS = 0;\n\nUSE `ry-vue`;\n")])])]),e("h2",{attrs:{id:"存储过程"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#存储过程"}},[t._v("#")]),t._v(" 存储过程")]),t._v(" "),e("ul",[e("li",[e("p",[e("a",{attrs:{href:"https://juejin.cn/post/6844904185725468685",target:"_blank",rel:"noopener noreferrer"}},[t._v("面向MySQL存储过程编程（详细）"),e("OutboundLink")],1)])]),t._v(" "),e("li",[e("p",[e("a",{attrs:{href:"https://www.bilibili.com/video/BV1q64y1T7Uh",target:"_blank",rel:"noopener noreferrer"}},[t._v("【黑马程序员】两小时带你玩转MySQL数据库存储过程【配套源码+笔记】"),e("OutboundLink")],1)])]),t._v(" "),e("li",[e("p",[t._v("https://dev.mysql.com/doc/refman/5.6/en/preface.html")])]),t._v(" "),e("li",[e("p",[t._v("https://dev.mysql.com/doc/refman/5.6/en/server-error-reference.html")]),t._v(" "),e("ul",[e("li",[t._v("https://dev.mysql.com/doc/mysql-errors/5.7/en/server-error-reference.html")])])]),t._v(" "),e("li",[e("p",[t._v("https://dev.mysql.com/doc/refman/5.7/en/sql-prepared-statements.html")])]),t._v(" "),e("li",[e("p",[t._v("https://dev.mysql.com/doc/refman/5.7/en/sql-compound-statements.html")])])]),t._v(" "),e("h3",{attrs:{id:"一、存储过程"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#一、存储过程"}},[t._v("#")]),t._v(" 一、存储过程")]),t._v(" "),e("h4",{attrs:{id:"_1-1-什么是存储过程"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-什么是存储过程"}},[t._v("#")]),t._v(" 1.1 什么是存储过程")]),t._v(" "),e("h4",{attrs:{id:"_1-2-数据库存储过程程序"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-数据库存储过程程序"}},[t._v("#")]),t._v(" 1.2 数据库存储过程程序")]),t._v(" "),e("h4",{attrs:{id:"_1-3-为什么要使用存储程序"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-为什么要使用存储程序"}},[t._v("#")]),t._v(" 1.3 为什么要使用存储程序")]),t._v(" "),e("h3",{attrs:{id:"二、存储过程的使用步骤"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#二、存储过程的使用步骤"}},[t._v("#")]),t._v(" 二、存储过程的使用步骤")]),t._v(" "),e("h4",{attrs:{id:"_2-1-存储过程的开发思想"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-存储过程的开发思想"}},[t._v("#")]),t._v(" 2.1 存储过程的开发思想")]),t._v(" "),e("h4",{attrs:{id:"_2-2-存储过程的优缺点"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-存储过程的优缺点"}},[t._v("#")]),t._v(" 2.2 存储过程的优缺点")]),t._v(" "),e("h4",{attrs:{id:"_2-3-mysql存储过程的官方文档"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-mysql存储过程的官方文档"}},[t._v("#")]),t._v(" 2.3 MySQL存储过程的官方文档")]),t._v(" "),e("h4",{attrs:{id:"_2-3-存储过程的使用语法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-存储过程的使用语法"}},[t._v("#")]),t._v(" 2.3 存储过程的使用语法")]),t._v(" "),e("h3",{attrs:{id:"三、存储过程的变量和赋值"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#三、存储过程的变量和赋值"}},[t._v("#")]),t._v(" 三、存储过程的变量和赋值")]),t._v(" "),e("h4",{attrs:{id:"_3-1-局部变量"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-局部变量"}},[t._v("#")]),t._v(" 3.1 局部变量")]),t._v(" "),e("h4",{attrs:{id:"_3-2-用户变量"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-用户变量"}},[t._v("#")]),t._v(" 3.2 用户变量")]),t._v(" "),e("h4",{attrs:{id:"_3-3-会话变量"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-会话变量"}},[t._v("#")]),t._v(" 3.3 会话变量")]),t._v(" "),e("h4",{attrs:{id:"_3-4-全局变量"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-全局变量"}},[t._v("#")]),t._v(" 3.4 全局变量")]),t._v(" "),e("h4",{attrs:{id:"_3-5-入参出参"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-5-入参出参"}},[t._v("#")]),t._v(" 3.5 入参出参")]),t._v(" "),e("h3",{attrs:{id:"四、存储过程中的流程控制"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#四、存储过程中的流程控制"}},[t._v("#")]),t._v(" 四、存储过程中的流程控制")]),t._v(" "),e("h4",{attrs:{id:"_4-1-if-条件判断-推荐"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-if-条件判断-推荐"}},[t._v("#")]),t._v(" 4.1 if 条件判断（推荐）")]),t._v(" "),e("h4",{attrs:{id:"_4-2-case条件判断"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-case条件判断"}},[t._v("#")]),t._v(" 4.2 case条件判断")]),t._v(" "),e("h4",{attrs:{id:"_4-3-loop循环"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-loop循环"}},[t._v("#")]),t._v(" 4.3 loop循环")]),t._v(" "),e("h4",{attrs:{id:"_4-4-repeat循环"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-4-repeat循环"}},[t._v("#")]),t._v(" 4.4 repeat循环")]),t._v(" "),e("h4",{attrs:{id:"_4-5-while循环"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-5-while循环"}},[t._v("#")]),t._v(" 4.5 while循环")]),t._v(" "),e("h4",{attrs:{id:"_4-6-流程控制语句-继续、结束"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-6-流程控制语句-继续、结束"}},[t._v("#")]),t._v(" 4.6 流程控制语句（继续、结束）")]),t._v(" "),e("h3",{attrs:{id:"五、游标与handler"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#五、游标与handler"}},[t._v("#")]),t._v(" 五、游标与handler")]),t._v(" "),e("h4",{attrs:{id:"_5-1-游标"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-游标"}},[t._v("#")]),t._v(" 5.1 游标")]),t._v(" "),e("h4",{attrs:{id:"_5-2-handler句柄"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-handler句柄"}},[t._v("#")]),t._v(" 5.2 handler句柄")]),t._v(" "),e("h2",{attrs:{id:"mysql数据库高级"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#mysql数据库高级"}},[t._v("#")]),t._v(" MySQL数据库高级")]),t._v(" "),e("ul",[e("li",[e("p",[e("a",{attrs:{href:"https://www.processon.com/mindmap/6164d01b1e085340f84175ca",target:"_blank",rel:"noopener noreferrer"}},[t._v("MySQL 高级开发 ProcessOn Mind"),e("OutboundLink")],1)])]),t._v(" "),e("li",[e("p",[e("a",{attrs:{href:"https://www.bilibili.com/video/BV1KW411u7vy?p=1",target:"_blank",rel:"noopener noreferrer"}},[t._v("尚硅谷MySQL数据库高级，mysql优化，数据库优化"),e("OutboundLink")],1)])]),t._v(" "),e("li",[e("p",[e("a",{attrs:{href:"https://blog.csdn.net/u011863024/article/details/115470147",target:"_blank",rel:"noopener noreferrer"}},[t._v("MySQL优化学习笔记"),e("OutboundLink")],1)])])]),t._v(" "),e("h3",{attrs:{id:"其他参考"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#其他参考"}},[t._v("#")]),t._v(" 其他参考")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("https://naotu.baidu.com/file/9fd1b2249eb371587b71bf4b7be39757")])]),t._v(" "),e("li",[e("p",[e("a",{attrs:{href:"http://3brother.cn/mysql.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("mysql高级应用.mmap"),e("OutboundLink")],1)])]),t._v(" "),e("li",[e("p",[e("a",{attrs:{href:"https://blog.csdn.net/qq_21579045/article/details/99702766",target:"_blank",rel:"noopener noreferrer"}},[t._v("尚硅谷MySQL高级学习笔记"),e("OutboundLink")],1)])]),t._v(" "),e("li",[e("p",[e("a",{attrs:{href:"https://blog.csdn.net/weixin_46002478/article/details/109158249",target:"_blank",rel:"noopener noreferrer"}},[t._v("MySQL高级建表语句"),e("OutboundLink")],1)])]),t._v(" "),e("li",[e("p",[e("a",{attrs:{href:"https://www.processon.com/view/link/5eafbe626376897466a3403f",target:"_blank",rel:"noopener noreferrer"}},[t._v("72_MySQL 高级开发 | ProcessOn免费在线作图,在线流程图,在线思维导图"),e("OutboundLink")],1)])]),t._v(" "),e("li",[e("p",[t._v("https://github.com/a29hbGE/mysql.git")])]),t._v(" "),e("li",[e("p",[e("a",{attrs:{href:"https://juejin.cn/column/6962445414091980814",target:"_blank",rel:"noopener noreferrer"}},[t._v("MySQL 数据库使用"),e("OutboundLink")],1)])]),t._v(" "),e("li",[e("p",[t._v("http://note.youdao.com/noteshare?id=9621ae473061a1cb975bc11580311f8c")])])]),t._v(" "),e("h2",{attrs:{id:"mysql安装配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#mysql安装配置"}},[t._v("#")]),t._v(" MySQL安装配置")]),t._v(" "),e("h3",{attrs:{id:"mysql-5-7-39-rpm包安装"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#mysql-5-7-39-rpm包安装"}},[t._v("#")]),t._v(" mysql-5.7.39 RPM包安装")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"http://c.biancheng.net/view/7616.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Linux安装配置MySQL详细步骤"),e("OutboundLink")],1)])]),t._v(" "),e("h4",{attrs:{id:"_1-下载地址"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-下载地址"}},[t._v("#")]),t._v(" 1. 下载地址")]),t._v(" "),e("ul",[e("li",[e("p",[e("a",{attrs:{href:"https://downloads.mysql.com/archives/community/",target:"_blank",rel:"noopener noreferrer"}},[t._v("MySQL :: Download MySQL Community Server (Archived Versions)"),e("OutboundLink")],1)]),t._v(" "),e("ol",[e("li",[t._v("Product Version: 5.7.39")]),t._v(" "),e("li",[t._v("Operating System: Red Hat Enterprise Linux / Oracle Linux")]),t._v(" "),e("li",[t._v("OS Version: All\n"),e("ul",[e("li",[t._v("https://downloads.mysql.com/archives/get/p/23/file/mysql-5.7.39-1.el7.x86_64.rpm-bundle.tar")])])])])]),t._v(" "),e("li",[e("p",[t._v("CentOS 7 应该选用 el7 安装包。如果安装包对应的系统版本不正确，安装时会出现有关 glibc 的依赖错误。CentOS 6.5，选用 el6 的安装包。")])])]),t._v(" "),e("h4",{attrs:{id:"_2-检测本地包"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-检测本地包"}},[t._v("#")]),t._v(" 2. 检测本地包")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("[root@2m264bunohhn7o ~]# rpm -qa | grep mariadb\nmariadb-libs-5.5.65-1.el7.x86_64\n[root@2m264bunohhn7o ~]# yum -y remove mariadb-libs-5.5.65-1.el7.x86_64\n")])])]),e("h4",{attrs:{id:"_3-安装"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-安装"}},[t._v("#")]),t._v(" 3. 安装")]),t._v(" "),e("h5",{attrs:{id:"_3-1-下载解压安装包"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-下载解压安装包"}},[t._v("#")]),t._v(" 3.1 下载解压安装包")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("# 创建用于存放第三方软件包的目录\n[root@2m264bunohhn7o ~]# mkdir -p /opt/module/mysql\n[root@2m264bunohhn7o ~]# cd /opt/module/mysql/\n\n# 下载安装包 步骤 1)：进入官方下载页面选择要下载的包。\n[root@2m264bunohhn7o mysql]# wget https://downloads.mysql.com/archives/get/p/23/file/mysql-5.7.39-1.el7.x86_64.rpm-bundle.tar\n[root@2m264bunohhn7o mysql]# tar -xvf mysql-5.7.39-1.el7.x86_64.rpm-bundle.tar \n[root@2m264bunohhn7o mysql]# ll\ntotal 1086272\n-rw-r--r-- 1 root root  556165120 Jun 13  2022 mysql-5.7.39-1.el7.x86_64.rpm-bundle.tar\n-rw-r--r-- 1 7155 31415  29107248 Jun 13  2022 mysql-community-client-5.7.39-1.el7.x86_64.rpm\n-rw-r--r-- 1 7155 31415    318320 Jun 13  2022 mysql-community-common-5.7.39-1.el7.x86_64.rpm\n-rw-r--r-- 1 7155 31415   4383060 Jun 13  2022 mysql-community-devel-5.7.39-1.el7.x86_64.rpm\n-rw-r--r-- 1 7155 31415  48149356 Jun 13  2022 mysql-community-embedded-5.7.39-1.el7.x86_64.rpm\n-rw-r--r-- 1 7155 31415  23316500 Jun 13  2022 mysql-community-embedded-compat-5.7.39-1.el7.x86_64.rpm\n-rw-r--r-- 1 7155 31415 133181836 Jun 13  2022 mysql-community-embedded-devel-5.7.39-1.el7.x86_64.rpm\n-rw-r--r-- 1 7155 31415   2717964 Jun 13  2022 mysql-community-libs-5.7.39-1.el7.x86_64.rpm\n-rw-r--r-- 1 7155 31415   1264480 Jun 13  2022 mysql-community-libs-compat-5.7.39-1.el7.x86_64.rpm\n-rw-r--r-- 1 7155 31415 186717812 Jun 13  2022 mysql-community-server-5.7.39-1.el7.x86_64.rpm\n-rw-r--r-- 1 7155 31415 126996412 Jun 13  2022 mysql-community-test-5.7.39-1.el7.x86_64.rpm\n\n# 步骤 2)：下载完成后，切换到 root 用户。按照依赖关系依次安装 rpm 包，依赖关系依次为 common→libs→client→server。使用命令rpm -ivh {-file-name}进行安装操作。\n# 安装common （卸载rpm -e mysql-community-common-5.7.39-1.el7.x86_64 检测）\n[root@2m264bunohhn7o mysql]# rpm -ivh mysql-community-common-5.7.39-1.el7.x86_64.rpm\n[root@2m264bunohhn7o mysql]# rpm -ivh mysql-community-libs-5.7.39-1.el7.x86_64.rpm\n[root@2m264bunohhn7o mysql]# rpm -ivh mysql-community-client-5.7.39-1.el7.x86_64.rpm\n[root@2m264bunohhn7o mysql]# rpm -ivh mysql-community-server-5.7.39-1.el7.x86_64.rpm\n# 检测\n[root@2m264bunohhn7o mysql]# rpm -qa | grep mysql\nmysql-community-common-5.7.39-1.el7.x86_64\nmysql-community-client-5.7.39-1.el7.x86_64\nmysql-community-server-5.7.39-1.el7.x86_64\nmysql-community-libs-5.7.39-1.el7.x86_64\n")])])]),e("h4",{attrs:{id:"_4-启动"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-启动"}},[t._v("#")]),t._v(" 4. 启动")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("[root@2m264bunohhn7o mysql]# which mysql\n/bin/mysql\n[root@2m264bunohhn7o mysql]# whereis mysql\nmysql: /usr/bin/mysql /usr/lib64/mysql /usr/share/mysql /usr/share/man/man1/mysql.1.gz\n# 步骤 3)：通过以下命令可以启动 MySQL 数据库，但是必须使用 root 权限。\n[root@2m264bunohhn7o mysql]# service mysqld start\nRedirecting to /bin/systemctl start mysqld.service\n[root@2m264bunohhn7o mysql]# mysql --version\nmysql  Ver 14.14 Distrib 5.7.39, for Linux (x86_64) using  EditLine wrapper\n# 步骤 4)：服务启动后，查找 root 初始随机密码（如果没有初始密码，直接输入用户名 root 登录即可）\n[root@2m264bunohhn7o mysql]# cat /var/log/mysqld.log | grep password\n2023-04-20T02:44:53.745467Z 1 [Note] A temporary password is generated for root@localhost: cuQA>7Iarx2X\n# 步骤 5)：安装成功后，使用以下命令登录 MySQL。\n[root@2m264bunohhn7o mysql]# mysql -uroot -p'cuQA>7Iarx2X'\n# 步骤 6)：可使用以下命令修改密码\nmysql> set password='dyyy2023.xxjsb@DYTX';\nQuery OK, 0 rows affected (0.00 sec);\nmysql> SHOW VARIABLES LIKE 'validate_password%';\n+--------------------------------------+--------+\n| Variable_name                        | Value  |\n+--------------------------------------+--------+\n| validate_password_check_user_name    | OFF    |\n| validate_password_dictionary_file    |        |\n| validate_password_length             | 8      |\n| validate_password_mixed_case_count   | 1      |\n| validate_password_number_count       | 1      |\n| validate_password_policy             | MEDIUM |\n| validate_password_special_char_count | 1      |\n+--------------------------------------+--------+\n7 rows in set (0.00 sec)\n# 步骤 7)：配置 MySQL 服务，将 /usr/share/mysql/ 或 /usr/share/ 文件夹下的某一个后缀名为 cnf 的文件拷贝到 /etc/ 文件夹下，并且改名为 my.cnf。使用 vi 编辑器来编辑 my.cnf\n[root@2m264bunohhn7o mysql]# find / -name my.cnf\n/etc/my.cnf\n[root@2m264bunohhn7o mysql]# cat /etc/my.cnf\n# 编辑并保存 my.cnf 文件后，必须重新启动 MySQL 服务，这样 my.cnf 中的配置才会起作用\n")])])]),e("ul",[e("li",[t._v("192.168.150.58:3306\n"),e("ul",[e("li",[t._v("root dyyy2023.xxjsb@DYTX")])])])]),t._v(" "),e("h4",{attrs:{id:"_5-开启远程访问权限"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-开启远程访问权限"}},[t._v("#")]),t._v(" 5. 开启远程访问权限")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://blog.csdn.net/mazaiting/article/details/106661158",target:"_blank",rel:"noopener noreferrer"}},[t._v("MySQL 异常: \"Host 'xxx' is not allowed to connect to this MySQL server\""),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://blog.csdn.net/weixin_31832223/article/details/113971079",target:"_blank",rel:"noopener noreferrer"}},[t._v("mysql撤销授权不生效_MySql授权和撤销权限操作"),e("OutboundLink")],1)])]),t._v(" "),e("h5",{attrs:{id:"第一种-改表法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#第一种-改表法"}},[t._v("#")]),t._v(" 第一种（改表法）")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("[root@2m264bunohhn7o mysql]# mysql -uroot -p'dyyy2023.xxjsb@DYTX'\n# 使用数据库mysql\nmysql> use mysql;\n# 查看主机和用户\nmysql> select host,user from user;\n+-----------+---------------+\n| host      | user          |\n+-----------+---------------+\n| localhost | mysql.session |\n| localhost | mysql.sys     |\n| localhost | root          |\n+-----------+---------------+\n3 rows in set (0.00 sec)\nmysql> update user set host = '%' where user = 'root';\nmysql> select host,user from user;\n+-----------+---------------+\n| host      | user          |\n+-----------+---------------+\n| %         | root          |\n| localhost | mysql.session |\n| localhost | mysql.sys     |\n+-----------+---------------+\n3 rows in set (0.00 sec)\n")])])]),e("h5",{attrs:{id:"第二种-授权法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#第二种-授权法"}},[t._v("#")]),t._v(" 第二种（授权法）")]),t._v(" "),e("ol",[e("li",[t._v("你想root使用mypassword从任何主机连接到mysql服务器的话")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("mysql> GRANT ALL PRIVILEGES ON *.* TO 'root'@'%' IDENTIFIED BY 'dyyy2023.xxjsb@DYTX' WITH GRANT OPTION;\nQuery OK, 0 rows affected, 1 warning (0.00 sec)\n\nmysql> select host,user from user;\n+-----------+---------------+\n| host      | user          |\n+-----------+---------------+\n| %         | root          |\n| localhost | mysql.session |\n| localhost | mysql.sys     |\n| localhost | root          |\n+-----------+---------------+\n4 rows in set (0.00 sec)\n\n# 撤销授权（无效）\nmysql> revoke ALL PRIVILEGES ON *.* from 'root'@'%';\nQuery OK, 0 rows affected (0.00 sec)\n# 删除mysql的user表中的数据，将没权限访问:(彻底的收权方法:)\nmysql> delete from user where user='root' and host='%';\nQuery OK, 1 row affected (0.00 sec)\n\nmysql> select host,user from user;\n+-----------+---------------+\n| host      | user          |\n+-----------+---------------+\n| localhost | mysql.session |\n| localhost | mysql.sys     |\n| localhost | root          |\n+-----------+---------------+\n3 rows in set (0.00 sec)\n\nmysql> flush privileges;\nQuery OK, 0 rows affected (0.00 sec)\n")])])]),e("ol",{attrs:{start:"2"}},[e("li",[t._v("允许用户root从ip为192.168.150.20的主机连接到mysql服务器，并使用'dyyy2023.xxjsb@DYTX'作为密码")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("mysql> GRANT ALL PRIVILEGES ON *.* TO 'root'@'192.168.150.20' IDENTIFIED BY 'dyyy2023.xxjsb@DYTX' WITH GRANT OPTION;\nmysql> GRANT ALL PRIVILEGES ON *.* TO 'root'@'192.168.150.57' IDENTIFIED BY 'dyyy2023.xxjsb@DYTX' WITH GRANT OPTION;\nmysql> select host,user from user;\n+----------------+---------------+\n| host           | user          |\n+----------------+---------------+\n| 192.168.150.20 | root          |\n| 192.168.150.57 | root          |\n")])])]),e("h4",{attrs:{id:"_6-开机自启"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_6-开机自启"}},[t._v("#")]),t._v(" 6.开机自启")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("[root@2m264bunohhn7o mysql]# vi /etc/rc.local\n# 添加mysqld开机自启\nservice mysqld start\n")])])]),e("h4",{attrs:{id:"_7-配置调整"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_7-配置调整"}},[t._v("#")]),t._v(" 7.配置调整")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("[root@2m264bunohhn7o ~]# find / -name my.cnf\n/etc/my.cnf\n[root@2m264bunohhn7o ~]# vi /etc/my.cnf\n# 移除默认的ONLY_FULL_GROUP_BY\nsql_mode='STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION'\n# 大小写不敏感\nlower_case_table_names=1\n[root@2m264bunohhn7o ~]# service mysqld restart\nRedirecting to /bin/systemctl restart mysqld.service\n")])])]),e("ul",[e("li",[t._v("验证")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("[root@2m264bunohhn7o ~]# mysql -uroot -p'dyyy2023.xxjsb@DYTX'\nmysql> show global variables like '%lower_case%';\n+------------------------+-------+\n| Variable_name          | Value |\n+------------------------+-------+\n| lower_case_file_system | OFF   |\n| lower_case_table_names | 1     |\n+------------------------+-------+\n2 rows in set (0.01 sec)\n\n# 调整前\nmysql> select @@global.sql_mode;\n+-------------------------------------------------------------------------------------------------------------------------------------------+\n| @@global.sql_mode                                                                                                                         |\n+-------------------------------------------------------------------------------------------------------------------------------------------+\n| ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION |\n+-------------------------------------------------------------------------------------------------------------------------------------------+\n1 row in set (0.00 sec)\n# 调整后\nmysql> select @@global.sql_mode;\n+------------------------------------------------------------------------------------------------------------------------+\n| @@global.sql_mode                                                                                                      |\n+------------------------------------------------------------------------------------------------------------------------+\n| STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION |\n+------------------------------------------------------------------------------------------------------------------------+\n1 row in set (0.00 sec)\n")])])]),e("h4",{attrs:{id:"其他"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#其他"}},[t._v("#")]),t._v(" 其他")]),t._v(" "),e("h5",{attrs:{id:"linux平台mysql的安装目录"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#linux平台mysql的安装目录"}},[t._v("#")]),t._v(" Linux平台MySQL的安装目录")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("文件夹")]),t._v(" "),e("th",[t._v("文件夹内容")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("/usr/bin")]),t._v(" "),e("td",[t._v("客户端和脚本（mysqladmin、mysqldump 等命令）")])]),t._v(" "),e("tr",[e("td",[t._v("/usr/sbin")]),t._v(" "),e("td",[t._v("mysqld 服务器")])]),t._v(" "),e("tr",[e("td",[t._v("/var/lib/mysql")]),t._v(" "),e("td",[t._v("日志文件、socket 文件和数据库")])]),t._v(" "),e("tr",[e("td",[t._v("/usr/share/info")]),t._v(" "),e("td",[t._v("信息格式的手册")])]),t._v(" "),e("tr",[e("td",[t._v("/usr/share/man")]),t._v(" "),e("td",[t._v("UNIX 帮助页")])]),t._v(" "),e("tr",[e("td",[t._v("/usr/include/mysql")]),t._v(" "),e("td",[t._v("头文件")])]),t._v(" "),e("tr",[e("td",[t._v("/usr/lib/mysql")]),t._v(" "),e("td",[t._v("库")])]),t._v(" "),e("tr",[e("td",[t._v("/usr/share/mysql")]),t._v(" "),e("td",[t._v("错误消息、字符集、安装文件和配置文件等")])]),t._v(" "),e("tr",[e("td",[t._v("/etc/rc.d/init.d/")]),t._v(" "),e("td",[t._v("启动脚本文件的 mysql 目录，可以用来启动和停止 MySQL 服务")])])])]),t._v(" "),e("h5",{attrs:{id:"命令登录-mysql"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#命令登录-mysql"}},[t._v("#")]),t._v(" 命令登录 MySQL")]),t._v(" "),e("ul",[e("li",[t._v("Commands end with; or\\g：说明 mysql 命令行下的命令是以分号（;）或“\\g”来结束的，遇到这个结束符就开始执行命令。")]),t._v(" "),e("li",[t._v("Your MySQL connection id is 1：id 表示 MySQL 数据库的连接次数，这里为 1，说明是首次登录。")]),t._v(" "),e("li",[t._v("Server version: 5.7.39 Server: Server version 后面说明数据库的版本，这个版本为 5.7.39； version: 5. 7.29-log MySQL Community Server（GPL）：Server version 后面说明数据库的版本，这个版本为 5.7.29。Community 表示该版本是社区版。")]),t._v(" "),e("li",[t._v("Type 'help;' or '\\h' for help：表示输入”help;“或者”\\h“可以看到帮助信息。")]),t._v(" "),e("li",[t._v("Type '\\c' to clear the current input statement：表示遇到”\\c“就清除前面的命令。")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("[root@2m264bunohhn7o mysql]# mysql -uroot -p'cuQA>7Iarx2X'\nmysql: [Warning] Using a password on the command line interface can be insecure.\nWelcome to the MySQL monitor.  Commands end with ; or \\g.\nYour MySQL connection id is 1\nServer version: 5.7.39\n\nCopyright (c) 2000, 2022, Oracle and/or its affiliates.\n\nOracle is a registered trademark of Oracle Corporation and/or its\naffiliates. Other names may be trademarks of their respective\nowners.\n\nType 'help;' or '\\h' for help. Type '\\c' to clear the current input statement.\n\nmysql> \n\n")])])]),e("h5",{attrs:{id:"异常处理"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#异常处理"}},[t._v("#")]),t._v(" 异常处理")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://blog.csdn.net/u010886217/article/details/89416159",target:"_blank",rel:"noopener noreferrer"}},[t._v("安装mysql 5.7.19 rpm包报错：/usr/bin/perl is needed by mysql-community-server-5.7.19-1.el7.x86_64"),e("OutboundLink")],1)])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("[root@2m264bunohhn7o mysql]# rpm -ivh mysql-community-server-5.7.39-1.el7.x86_64.rpm \nwarning: mysql-community-server-5.7.39-1.el7.x86_64.rpm: Header V4 RSA/SHA256 Signature, key ID 3a79bd29: NOKEY\nerror: Failed dependencies:\n\t/usr/bin/perl is needed by mysql-community-server-5.7.39-1.el7.x86_64\n\tperl(Getopt::Long) is needed by mysql-community-server-5.7.39-1.el7.x86_64\n\tperl(strict) is needed by mysql-community-server-5.7.39-1.el7.x86_64\n# 缺少nperl.x86_64依赖，使用yum安装即可。\n[root@2m264bunohhn7o mysql]# yum search perl | grep perl.x86_64\nperl.x86_64 : Practical Extraction and Report Language\n[root@2m264bunohhn7o mysql]# yum -y install perl.x86_64\n")])])]),e("h3",{attrs:{id:"mysql-5-7-28-rpm包安装"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#mysql-5-7-28-rpm包安装"}},[t._v("#")]),t._v(" mysql-5.7.28 RPM包安装")]),t._v(" "),e("h4",{attrs:{id:"_1-官网下载地址"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-官网下载地址"}},[t._v("#")]),t._v(" 1. 官网下载地址")]),t._v(" "),e("ul",[e("li",[t._v("https://dev.mysql.com/downloads/mysql/5.7.html#downloads\n"),e("ul",[e("li",[t._v("https://dev.mysql.com/get/Downloads/MySQL-5.7/mysql-5.7.28-1.el7.x86_64.rpm-bundle.tar")]),t._v(" "),e("li",[e("a",{attrs:{href:"https://downloads.mysql.com/archives/community/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Archives"),e("OutboundLink")],1)])])])]),t._v(" "),e("h4",{attrs:{id:"_2-检测本地包-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-检测本地包-2"}},[t._v("#")]),t._v(" 2. 检测本地包")]),t._v(" "),e("p",[t._v("1.检测本地是否有mysql已存在的包")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("[root@bd-00-00 software]# rpm -qa | grep mysql\n# 必须 载原有系统mysql的内部库\n[root@bd-00-00 software]# yum remove mysql-libs \n")])])]),e("ol",{attrs:{start:"2"}},[e("li",[t._v("检测本地是否有mariadb已存在的包（可选）")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("[root@bd-00-00 software]# rpm -qa | grep mariadb\nmariadb-libs-5.5.60-1.el7_5.x86_64\n# rpm -e --nodeps mariadb-libs-5.5.60-1.el7_5.x86_64\n[root@bd-00-00 software]# yum -y remove mariadb-libs-5.5.60-1.el7_5.x86_64\n")])])]),e("h4",{attrs:{id:"_3-安装-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-安装-2"}},[t._v("#")]),t._v(" 3. 安装")]),t._v(" "),e("h5",{attrs:{id:"_1-上传安装包到指定目录"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-上传安装包到指定目录"}},[t._v("#")]),t._v(" 1. 上传安装包到指定目录")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("[root@bd-00-00 software]# ll\ntotal 595272\n-rw-r--r-- 1 root root 609556480 Nov  8 22:51 mysql-5.7.28-1.el7.x86_64.rpm-bundle.tar\n")])])]),e("h5",{attrs:{id:"_2-解压安装包"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-解压安装包"}},[t._v("#")]),t._v(" 2. 解压安装包")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("[root@bd-00-00 software]# mkdir -p /opt/module/mysql\n[root@bd-00-00 software]# tar -xvf mysql-5.7.28-1.el7.x86_64.rpm-bundle.tar -C /opt/module/mysql\n")])])]),e("h5",{attrs:{id:"_3-安装-3"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-安装-3"}},[t._v("#")]),t._v(" 3. 安装")]),t._v(" "),e("ol",[e("li",[t._v("必须")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("[root@bd-00-00 software]# cd /opt/module/mysql/\n[root@bd-00-00 mysql]# rpm -ivh mysql-community-common-5.7.28-1.el7.x86_64.rpm \n[root@bd-00-00 mysql]# rpm -ivh mysql-community-libs-5.7.28-1.el7.x86_64.rpm \n[root@bd-00-00 mysql]# rpm -ivh mysql-community-client-5.7.28-1.el7.x86_64.rpm \n[root@bd-00-00 mysql]# rpm -ivh mysql-community-server-5.7.28-1.el7.x86_64.rpm \nwarning: mysql-community-server-5.7.28-1.el7.x86_64.rpm: Header V3 DSA/SHA1 Signature, key ID 5072e1f5: NOKEY\nerror: Failed dependencies:\n        net-tools is needed by mysql-community-server-5.7.28-1.el7.x86_64\n# 安装依赖\n# # yum install -y perl\n[root@bd-00-00 mysql]# yum -y install net-tools\n")])])]),e("ol",{attrs:{start:"2"}},[e("li",[t._v("可选")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("[root@bd-00-00 mysql]# rpm -ivh mysql-community-libs-compat-5.7.28-1.el7.x86_64.rpm \n[root@bd-00-00 mysql]# rpm -ivh mysql-community-devel-5.7.28-1.el7.x86_64.rpm \n")])])]),e("h4",{attrs:{id:"_4-启动-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-启动-2"}},[t._v("#")]),t._v(" 4. 启动")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("[root@bd-00-00 ~]# whereis mysql\nmysql: /usr/bin/mysql /usr/lib64/mysql /usr/include/mysql /usr/share/mysql /usr/share/man/man1/mysql.1.gz\n[root@bd-00-00 ~]# which mysql\n/usr/bin/mysql\n")])])]),e("h5",{attrs:{id:"_1-查看mysql服务是否启动"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-查看mysql服务是否启动"}},[t._v("#")]),t._v(" 1 查看mysql服务是否启动")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("[root@bd-00-00 mysql]# service mysqld status\nRedirecting to /bin/systemctl status mysqld.service\n")])])]),e("h5",{attrs:{id:"_2-启动mysql服务"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-启动mysql服务"}},[t._v("#")]),t._v(" 2 启动mysql服务")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("[root@bd-00-00 mysql]# service mysqld start\nRedirecting to /bin/systemctl start mysqld.service\n")])])]),e("h5",{attrs:{id:"_3-查看默认生成的密码"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-查看默认生成的密码"}},[t._v("#")]),t._v(" 3 查看默认生成的密码")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("[root@bd-00-00 mysql]# cat /var/log/mysqld.log | grep password\n2019-11-09T10:51:45.963490Z 1 [Note] A temporary password is generated for root@localhost: w1>e5jiRwah,\n")])])]),e("h5",{attrs:{id:"_4-登录"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-登录"}},[t._v("#")]),t._v(" 4 登录")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("[root@bd-00-00 mysql]# mysql -uroot -p'w1>e5jiRwah,'\n")])])]),e("h5",{attrs:{id:"_5-修改密码"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-修改密码"}},[t._v("#")]),t._v(" 5 修改密码")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("mysql> alter user 'root'@'localhost' identified by'000000';\nERROR 1819 (HY000): Your password does not satisfy the current policy requirements\n")])])]),e("h6",{attrs:{id:"_1-修改密码规则"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-修改密码规则"}},[t._v("#")]),t._v(" 1 修改密码规则")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("级别")]),t._v(" "),e("th",[t._v("描述")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("0 or LOW")]),t._v(" "),e("td",[t._v("长度")])]),t._v(" "),e("tr",[e("td",[t._v("1 or MEDIUM")]),t._v(" "),e("td",[t._v("长度、大小写、数字、特殊字符")])]),t._v(" "),e("tr",[e("td",[t._v("2 or STRONG")]),t._v(" "),e("td",[t._v("长度、大小写、数字、特殊字符、词典")])])])]),t._v(" "),e("ul",[e("li",[t._v("注 以下修改是临时修改")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("# 1.密码强度检查等级，0/LOW、1/MEDIUM、2/STRONG\nmysql> set global validate_password_policy=0;\n# 2.密码至少要包含的小写字母个数和大写字母个数\nmysql> set global validate_password_mixed_case_count=0;\n# 3.密码至少要包含的数字个数 \nmysql> set global validate_password_number_count=3;\n# 4. 密码至少要包含的特殊字符数\nmysql> set global validate_password_special_char_count=0;\n# 5.密码最小长度，参数默认为8\n# 它有最小值的限制，最小值为：validate_password_number_count + 密码至少要包含的数字个数validate_password_special_char_count +特殊字符(2 * validate_password_mixed_case_count)至少要包含的小写字母个数和大写字母个数\nmysql> set global validate_password_length=3;\n")])])]),e("h6",{attrs:{id:"_2-修改密码"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-修改密码"}},[t._v("#")]),t._v(" 2 修改密码")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("mysql> alter user 'root'@'localhost' identified by'000000';\n\n（跳过）GRANT ALL PRIVILEGES ON *.* TO 'root'@'localhost' IDENTIFIED BY '000000' WITH GRANT OPTION;\n")])])]),e("p",[t._v("####### 1 查询当前user表内root的登录权限")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("mysql> select host,user from mysql.user; \n+-----------+---------------+\n| host      | user          |\n+-----------+---------------+\n| localhost | mysql.session |\n| localhost | mysql.sys     |\n| localhost | root          |\n+-----------+---------------+\n3 rows in set (0.00 sec)\n")])])]),e("p",[t._v("####### 2 修改host为所有%")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("mysql> update mysql.user set host='%' where user='root';\n")])])]),e("p",[t._v("####### 3 刷新缓存")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("mysql> flush privileges;\n")])])]),e("h4",{attrs:{id:"_5-远程访问"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-远程访问"}},[t._v("#")]),t._v(" 5. 远程访问")]),t._v(" "),e("ul",[e("li",[t._v("关闭防火墙")])]),t._v(" "),e("h4",{attrs:{id:"_6-补充操作"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_6-补充操作"}},[t._v("#")]),t._v(" 6. 补充操作")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("mysql> help;\n# 修改root本地密码\nmysql> alter user 'root'@'localhost'identified by 'TosinJia_1';\n# 远程访问\nmysql> create user 'root'@'%' identified by 'TosinJia_1';\n# 授权 所有库 所有权限\nmysql> grant all on *.* to 'root'@'%';\n\n#创建数据库\nmysql> create database hive;\n#创建用户\nmysql> create user 'hiveowner'@'%' identified by 'TosinJia_1';\n#给用户授权\nmysql> grant all on hive.* TO 'hiveowner'@'%';\nmysql> grant all on hive.* TO 'hiveowner'@'localhost' identified by 'TosinJia_1';\n")])])])])}),[],!1,null,null,null);a.default=r.exports}}]);